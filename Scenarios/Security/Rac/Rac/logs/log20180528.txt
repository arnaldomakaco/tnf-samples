2018-05-28 10:11:00.693 -03:00 [INFO] Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager User profile is available. Using '"C:\Windows\system32\config\systemprofile\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2018-05-28 10:11:01.377 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac  
2018-05-28 10:11:01.503 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:01.535 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:01.597 -03:00 [INFO] Tnf.Settings.Internal.SettingDefinitionManager Settings definitions loaded: [Tnf.Localization.DefaultLanguageName,Tnf.Timing.TimeZone,Tnf.Rac.UserManagement.IsEmailConfirmationRequiredForLogin,Tnf.Rac.UserManagement.TwoFactorLogin.IsEnabled,Tnf.Rac.UserManagement.TwoFactorLogin.IsRememberBrowserEnabled,Tnf.Rac.UserManagement.TwoFactorLogin.IsEmailProviderEnabled,Tnf.Rac.UserManagement.TwoFactorLogin.IsSmsProviderEnabled,Tnf.Rac.UserManagement.UserLockOut.IsEnabled,Tnf.Rac.UserManagement.UserLockOut.MaxFailedAccessAttemptsBeforeLockout,Tnf.Rac.UserManagement.UserLockOut.DefaultAccountLockoutSeconds,Tnf.Rac.UserManagement.PasswordComplexity.RequireDigit,Tnf.Rac.UserManagement.PasswordComplexity.RequireLowercase,Tnf.Rac.UserManagement.PasswordComplexity.RequireNonAlphanumeric,Tnf.Rac.UserManagement.PasswordComplexity.RequireUppercase,Tnf.Rac.UserManagement.PasswordComplexity.RequiredLength,TnfExternalAuthentication.IsEnabled,TnfExternalAuthentication.SourceName,TnfExternalAuthentication.GetValidateCredentialAddress,TnfExternalAuthentication.GetUserInfoAddress]
2018-05-28 10:11:02.436 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/index.html"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\index.html"'
2018-05-28 10:11:02.466 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1101.7156ms 200 text/html
2018-05-28 10:11:02.482 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/polyfills.1617031006fd4c78c4d6.bundle.js  
2018-05-28 10:11:02.484 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:02.484 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:02.485 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/styles.e53a8658dea93819d28c.bundle.css  
2018-05-28 10:11:02.485 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:02.486 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:02.487 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/polyfills.1617031006fd4c78c4d6.bundle.js"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\polyfills.1617031006fd4c78c4d6.bundle.js"'
2018-05-28 10:11:02.494 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/styles.e53a8658dea93819d28c.bundle.css"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\styles.e53a8658dea93819d28c.bundle.css"'
2018-05-28 10:11:02.495 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/inline.78df45e1d848f9b8be07.bundle.js  
2018-05-28 10:11:02.496 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:02.497 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:02.498 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/inline.78df45e1d848f9b8be07.bundle.js"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\inline.78df45e1d848f9b8be07.bundle.js"'
2018-05-28 10:11:02.506 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/main.cd4b50dbae5725cb97c3.bundle.js  
2018-05-28 10:11:02.507 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:02.508 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:02.509 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/main.cd4b50dbae5725cb97c3.bundle.js"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\main.cd4b50dbae5725cb97c3.bundle.js"'
2018-05-28 10:11:02.515 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 29.6466ms 200 text/css
2018-05-28 10:11:02.523 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 28.4629ms 200 application/javascript
2018-05-28 10:11:02.524 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/scripts.ed8e74a7b04b82c96512.bundle.js  
2018-05-28 10:11:02.527 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:02.527 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:02.529 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/scripts.ed8e74a7b04b82c96512.bundle.js"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\scripts.ed8e74a7b04b82c96512.bundle.js"'
2018-05-28 10:11:02.557 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 74.1215ms 200 application/javascript
2018-05-28 10:11:02.563 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/NunitoSans-Regular.fb98ed1700e8dfaf0764.ttf  
2018-05-28 10:11:02.565 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-05-28 10:11:02.570 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:02.571 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:02.572 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/NunitoSans-Regular.fb98ed1700e8dfaf0764.ttf"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\NunitoSans-Regular.fb98ed1700e8dfaf0764.ttf"'
2018-05-28 10:11:02.575 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 11.1592ms 200 application/x-font-ttf
2018-05-28 10:11:02.601 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 76.2238ms 200 application/javascript
2018-05-28 10:11:02.657 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 151.0679ms 200 application/javascript
2018-05-28 10:11:03.030 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/.well-known/openid-configuration  
2018-05-28 10:11:03.031 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:03.031 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:03.034 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/avatarImage  
2018-05-28 10:11:03.034 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:03.035 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:03.050 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-05-28 10:11:03.066 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/index.html"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\index.html"'
2018-05-28 10:11:03.067 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 33.2193ms 200 text/html
2018-05-28 10:11:03.073 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/assets/images/totvs-avatar-default.svg  
2018-05-28 10:11:03.074 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:03.074 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:03.074 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/assets/images/totvs-avatar-default.svg"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\assets\images\totvs-avatar-default.svg"'
2018-05-28 10:11:03.074 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1.1343ms 200 image/svg+xml
2018-05-28 10:11:03.233 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-05-28 10:11:03.293 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-28 10:11:03.294 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"Description\", \"x\".\"DisplayName\", \"x\".\"Emphasize\", \"x\".\"Enabled\", \"x\".\"Name\", \"x\".\"Required\", \"x\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"x\"
ORDER BY \"x\".\"Id\""
2018-05-28 10:11:03.323 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.UserClaims\".\"Id\", \"x.UserClaims\".\"IdentityResourceId\", \"x.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"x.UserClaims\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"IdentityResources\" AS \"x0\"
) AS \"t\" ON \"x.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-28 10:11:03.374 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-28 10:11:03.376 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"Description\", \"x\".\"DisplayName\", \"x\".\"Enabled\", \"x\".\"Name\"
FROM \"ApiResources\" AS \"x\"
ORDER BY \"x\".\"Id\""
2018-05-28 10:11:03.388 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Secrets\".\"Id\", \"x.Secrets\".\"ApiResourceId\", \"x.Secrets\".\"Description\", \"x.Secrets\".\"Expiration\", \"x.Secrets\".\"Type\", \"x.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"x.Secrets\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"ApiResources\" AS \"x0\"
) AS \"t\" ON \"x.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-28 10:11:03.391 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Scopes\".\"Id\", \"x.Scopes\".\"ApiResourceId\", \"x.Scopes\".\"Description\", \"x.Scopes\".\"DisplayName\", \"x.Scopes\".\"Emphasize\", \"x.Scopes\".\"Name\", \"x.Scopes\".\"Required\", \"x.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"x.Scopes\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"ApiResources\" AS \"x1\"
) AS \"t0\" ON \"x.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"x.Scopes\".\"Id\""
2018-05-28 10:11:03.403 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Scopes.UserClaims\".\"Id\", \"x.Scopes.UserClaims\".\"ApiScopeId\", \"x.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"x.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"x.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"x.Scopes0\"
    INNER JOIN (
        SELECT \"x2\".\"Id\"
        FROM \"ApiResources\" AS \"x2\"
    ) AS \"t1\" ON \"x.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"x.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-05-28 10:11:03.405 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.UserClaims\".\"Id\", \"x.UserClaims\".\"ApiResourceId\", \"x.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"x.UserClaims\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"ApiResources\" AS \"x3\"
) AS \"t3\" ON \"x.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-28 10:11:03.687 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 657.3032ms 200 application/json; charset=UTF-8
2018-05-28 10:11:03.688 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/.well-known/openid-configuration  
2018-05-28 10:11:03.689 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:03.689 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:03.690 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-05-28 10:11:03.691 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-05-28 10:11:03.692 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-28 10:11:03.694 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"Description\", \"x\".\"DisplayName\", \"x\".\"Emphasize\", \"x\".\"Enabled\", \"x\".\"Name\", \"x\".\"Required\", \"x\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"x\"
ORDER BY \"x\".\"Id\""
2018-05-28 10:11:03.694 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.UserClaims\".\"Id\", \"x.UserClaims\".\"IdentityResourceId\", \"x.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"x.UserClaims\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"IdentityResources\" AS \"x0\"
) AS \"t\" ON \"x.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-28 10:11:03.696 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-28 10:11:03.697 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"Description\", \"x\".\"DisplayName\", \"x\".\"Enabled\", \"x\".\"Name\"
FROM \"ApiResources\" AS \"x\"
ORDER BY \"x\".\"Id\""
2018-05-28 10:11:03.698 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Secrets\".\"Id\", \"x.Secrets\".\"ApiResourceId\", \"x.Secrets\".\"Description\", \"x.Secrets\".\"Expiration\", \"x.Secrets\".\"Type\", \"x.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"x.Secrets\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"ApiResources\" AS \"x0\"
) AS \"t\" ON \"x.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-28 10:11:03.698 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Scopes\".\"Id\", \"x.Scopes\".\"ApiResourceId\", \"x.Scopes\".\"Description\", \"x.Scopes\".\"DisplayName\", \"x.Scopes\".\"Emphasize\", \"x.Scopes\".\"Name\", \"x.Scopes\".\"Required\", \"x.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"x.Scopes\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"ApiResources\" AS \"x1\"
) AS \"t0\" ON \"x.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"x.Scopes\".\"Id\""
2018-05-28 10:11:03.698 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Scopes.UserClaims\".\"Id\", \"x.Scopes.UserClaims\".\"ApiScopeId\", \"x.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"x.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"x.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"x.Scopes0\"
    INNER JOIN (
        SELECT \"x2\".\"Id\"
        FROM \"ApiResources\" AS \"x2\"
    ) AS \"t1\" ON \"x.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"x.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-05-28 10:11:03.699 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.UserClaims\".\"Id\", \"x.UserClaims\".\"ApiResourceId\", \"x.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"x.UserClaims\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"ApiResources\" AS \"x3\"
) AS \"t3\" ON \"x.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-28 10:11:03.700 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 11.7054ms 200 application/json; charset=UTF-8
2018-05-28 10:11:03.706 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/connect/checksession  
2018-05-28 10:11:03.707 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:03.708 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:03.709 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.CheckSessionEndpoint" for "/connect/checksession"
2018-05-28 10:11:03.726 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 20.2754ms 200 text/html; charset=UTF-8
2018-05-28 10:11:03.735 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/connect/authorize?client_id=rac_oidc&redirect_uri=http%3A%2F%2Flocalhost%2Frac%2Fauth-callback&response_type=code%20id_token%20token&scope=openid%20profile%20email%20authorization_api%20management_api%20offline_access&state=ad2994a8483f43e3ab2b987188f7be19&nonce=583c627ae03d4ff1a4781cc007c30dfd  
2018-05-28 10:11:03.736 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:03.736 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:03.749 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize"
2018-05-28 10:11:03.757 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:03.776 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-05-28 10:11:03.842 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-28 10:11:03.845 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("2"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-05-28 10:11:03.877 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-28 10:11:03.884 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-05-28 10:11:03.890 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-05-28 10:11:03.895 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-05-28 10:11:03.901 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-28 10:11:03.906 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-05-28 10:11:03.909 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-05-28 10:11:03.910 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-05-28 10:11:03.916 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-05-28 10:11:04.046 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-28 10:11:04.047 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
ORDER BY \"identityResource\".\"Id\""
2018-05-28 10:11:04.050 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource.UserClaims\".\"Id\", \"identityResource.UserClaims\".\"IdentityResourceId\", \"identityResource.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"identityResource.UserClaims\"
INNER JOIN (
    SELECT \"identityResource0\".\"Id\"
    FROM \"IdentityResources\" AS \"identityResource0\"
    WHERE \"identityResource0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
) AS \"t\" ON \"identityResource.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-28 10:11:04.077 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-28 10:11:04.079 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-05-28 10:11:04.082 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-28 10:11:04.083 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-05-28 10:11:04.085 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-05-28 10:11:04.086 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-28 10:11:04.097 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-28 10:11:04.098 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
ORDER BY \"identityResource\".\"Id\""
2018-05-28 10:11:04.098 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource.UserClaims\".\"Id\", \"identityResource.UserClaims\".\"IdentityResourceId\", \"identityResource.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"identityResource.UserClaims\"
INNER JOIN (
    SELECT \"identityResource0\".\"Id\"
    FROM \"IdentityResources\" AS \"identityResource0\"
    WHERE \"identityResource0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
) AS \"t\" ON \"identityResource.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-28 10:11:04.100 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-28 10:11:04.101 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-05-28 10:11:04.101 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-28 10:11:04.102 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-05-28 10:11:04.102 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-05-28 10:11:04.102 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-28 10:11:04.126 -03:00 [INFO] IdentityServer4.Endpoints.AuthorizeEndpoint ValidatedAuthorizeRequest
"{
  \"ClientId\": \"rac_oidc\",
  \"ClientName\": \"OIDC Client for RAC\",
  \"RedirectUri\": \"http://localhost/rac/auth-callback\",
  \"AllowedRedirectUris\": [
    \"http://localhost:5000/auth-callback\",
    \"http://localhost/rac/auth-callback\",
    \"http://localhost/rac/assets/silent-renew.html\",
    \"http://localhost:5000/assets/silent-renew.html\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"code id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"hybrid\",
  \"RequestedScopes\": \"openid profile email authorization_api management_api offline_access\",
  \"State\": \"ad2994a8483f43e3ab2b987188f7be19\",
  \"Nonce\": \"583c627ae03d4ff1a4781cc007c30dfd\",
  \"Raw\": {
    \"client_id\": \"rac_oidc\",
    \"redirect_uri\": \"http://localhost/rac/auth-callback\",
    \"response_type\": \"code id_token token\",
    \"scope\": \"openid profile email authorization_api management_api offline_access\",
    \"state\": \"ad2994a8483f43e3ab2b987188f7be19\",
    \"nonce\": \"583c627ae03d4ff1a4781cc007c30dfd\"
  }
}"
2018-05-28 10:11:04.133 -03:00 [INFO] IdentityServer4.ResponseHandling.AuthorizeInteractionResponseGenerator Showing login: User is not authenticated
2018-05-28 10:11:04.137 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 402.4283ms 302 
2018-05-28 10:11:04.140 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/account/login?returnUrl=%2Frac%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Drac_oidc%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%252Frac%252Fauth-callback%26response_type%3Dcode%2520id_token%2520token%26scope%3Dopenid%2520profile%2520email%2520authorization_api%2520management_api%2520offline_access%26state%3Dad2994a8483f43e3ab2b987188f7be19%26nonce%3D583c627ae03d4ff1a4781cc007c30dfd  
2018-05-28 10:11:04.140 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:04.140 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:04.153 -03:00 [INFO] Tnf.Localization.Internal.LocalizationManager Initializing 3 localization sources.
2018-05-28 10:11:04.169 -03:00 [INFO] Tnf.Localization.Internal.LocalizationManager Initialized localization source: TnfRac
2018-05-28 10:11:04.169 -03:00 [INFO] Tnf.Localization.Internal.LocalizationManager Initialized localization source: TnfRacIdentity
2018-05-28 10:11:04.185 -03:00 [INFO] Tnf.Localization.Internal.LocalizationManager Initialized localization source: Tnf
2018-05-28 10:11:04.248 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executing action method "Tnf.Rac.OpenIdOAuth2.Controllers.AccountController.Login (Tnf.Rac.OpenIdOAuth2)" with arguments (["/rac/connect/authorize/callback?client_id=rac_oidc&redirect_uri=http%3A%2F%2Flocalhost%2Frac%2Fauth-callback&response_type=code%20id_token%20token&scope=openid%20profile%20email%20authorization_api%20management_api%20offline_access&state=ad2994a8483f43e3ab2b987188f7be19&nonce=583c627ae03d4ff1a4781cc007c30dfd"]) - ModelState is Valid
2018-05-28 10:11:04.265 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:04.265 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-05-28 10:11:04.266 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-28 10:11:04.267 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-05-28 10:11:04.267 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-28 10:11:04.268 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-05-28 10:11:04.268 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-05-28 10:11:04.268 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-05-28 10:11:04.268 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-28 10:11:04.268 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-05-28 10:11:04.268 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-05-28 10:11:04.269 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-05-28 10:11:04.269 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-05-28 10:11:04.270 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-28 10:11:04.270 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
ORDER BY \"identityResource\".\"Id\""
2018-05-28 10:11:04.271 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource.UserClaims\".\"Id\", \"identityResource.UserClaims\".\"IdentityResourceId\", \"identityResource.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"identityResource.UserClaims\"
INNER JOIN (
    SELECT \"identityResource0\".\"Id\"
    FROM \"IdentityResources\" AS \"identityResource0\"
    WHERE \"identityResource0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
) AS \"t\" ON \"identityResource.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-28 10:11:04.272 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-28 10:11:04.273 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-05-28 10:11:04.273 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-28 10:11:04.273 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-05-28 10:11:04.274 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-05-28 10:11:04.274 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-28 10:11:04.275 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-28 10:11:04.276 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
ORDER BY \"identityResource\".\"Id\""
2018-05-28 10:11:04.276 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource.UserClaims\".\"Id\", \"identityResource.UserClaims\".\"IdentityResourceId\", \"identityResource.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"identityResource.UserClaims\"
INNER JOIN (
    SELECT \"identityResource0\".\"Id\"
    FROM \"IdentityResources\" AS \"identityResource0\"
    WHERE \"identityResource0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
) AS \"t\" ON \"identityResource.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-28 10:11:04.277 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-28 10:11:04.279 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-05-28 10:11:04.279 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-28 10:11:04.280 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-05-28 10:11:04.280 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-05-28 10:11:04.281 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-28 10:11:04.492 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-28 10:11:04.493 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-05-28 10:11:04.493 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-28 10:11:04.493 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-05-28 10:11:04.493 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-05-28 10:11:04.494 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-05-28 10:11:04.494 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-28 10:11:04.494 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-05-28 10:11:04.495 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-05-28 10:11:04.495 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-05-28 10:11:04.495 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-05-28 10:11:05.775 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/connect/authorize?client_id=rac_oidc&redirect_uri=http%3A%2F%2Flocalhost%2Frac%2Fassets%2Fsilent-renew.html&response_type=id_token&scope=openid&state=3c5e8ebe86174e23a20fdff3aa42d58d&nonce=438fae490eae423196294cbf3fcfaa45&prompt=none  
2018-05-28 10:11:05.775 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:05.776 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:05.776 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize"
2018-05-28 10:11:05.777 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:05.777 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-05-28 10:11:05.780 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-28 10:11:05.781 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-05-28 10:11:05.782 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-28 10:11:05.782 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-05-28 10:11:05.782 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-05-28 10:11:05.783 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-05-28 10:11:05.783 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-28 10:11:05.783 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-05-28 10:11:05.784 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-05-28 10:11:05.784 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-05-28 10:11:05.784 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-05-28 10:11:05.785 -03:00 [EROR] IdentityServer4.Validation.AuthorizeRequestValidator Invalid grant type for client: "implicit"
"{
  \"ClientId\": \"rac_oidc\",
  \"ClientName\": \"OIDC Client for RAC\",
  \"RedirectUri\": \"http://localhost/rac/assets/silent-renew.html\",
  \"AllowedRedirectUris\": [
    \"http://localhost:5000/auth-callback\",
    \"http://localhost/rac/auth-callback\",
    \"http://localhost/rac/assets/silent-renew.html\",
    \"http://localhost:5000/assets/silent-renew.html\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"id_token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"\",
  \"State\": \"3c5e8ebe86174e23a20fdff3aa42d58d\",
  \"Raw\": {
    \"client_id\": \"rac_oidc\",
    \"redirect_uri\": \"http://localhost/rac/assets/silent-renew.html\",
    \"response_type\": \"id_token\",
    \"scope\": \"openid\",
    \"state\": \"3c5e8ebe86174e23a20fdff3aa42d58d\",
    \"nonce\": \"438fae490eae423196294cbf3fcfaa45\",
    \"prompt\": \"none\"
  }
}"
2018-05-28 10:11:05.789 -03:00 [EROR] IdentityServer4.Endpoints.AuthorizeEndpoint Request validation failed
2018-05-28 10:11:05.789 -03:00 [INFO] IdentityServer4.Endpoints.AuthorizeEndpoint "{
  \"ClientId\": \"rac_oidc\",
  \"ClientName\": \"OIDC Client for RAC\",
  \"RedirectUri\": \"http://localhost/rac/assets/silent-renew.html\",
  \"AllowedRedirectUris\": [
    \"http://localhost:5000/auth-callback\",
    \"http://localhost/rac/auth-callback\",
    \"http://localhost/rac/assets/silent-renew.html\",
    \"http://localhost:5000/assets/silent-renew.html\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"id_token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"\",
  \"State\": \"3c5e8ebe86174e23a20fdff3aa42d58d\",
  \"Raw\": {
    \"client_id\": \"rac_oidc\",
    \"redirect_uri\": \"http://localhost/rac/assets/silent-renew.html\",
    \"response_type\": \"id_token\",
    \"scope\": \"openid\",
    \"state\": \"3c5e8ebe86174e23a20fdff3aa42d58d\",
    \"nonce\": \"438fae490eae423196294cbf3fcfaa45\",
    \"prompt\": \"none\"
  }
}"
2018-05-28 10:11:05.842 -03:00 [INFO] IdentityServer4.Events.DefaultEventService {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "rac_oidc",
  "ClientName": "OIDC Client for RAC",
  "RedirectUri": "http://localhost/rac/assets/silent-renew.html",
  "Endpoint": "Authorize",
  "Scopes": "",
  "GrantType": "implicit",
  "Error": "unauthorized_client",
  "ActivityId": "0HLE4JHQRC5A0:00000003",
  "TimeStamp": "2018-05-28T13:11:05Z",
  "ProcessId": 18472,
  "LocalIpAddress": "127.0.0.1:12957",
  "RemoteIpAddress": "::1"
}
2018-05-28 10:11:05.871 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 96.5956ms 302 
2018-05-28 10:11:05.880 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/home/error?errorId=CfDJ8KCn75i97pdOotf12_il-N86JXpcVWVeFQ65BJUyrPLtTo8Lds-O71y0AGLKP74CpYOZbta2SSldb-Qm5CNjGXR5uGEVIiuYj1Gc87GC8g64B-CPe1AUjvQJNhgR9cAYuVbzBQjGx1cb8vud75y2hHXP0gtDJgwAVkQL0vsQl6ChaNYSz3fGh6pxUJL3r8IYZsxKU8SCAc5GF3dM_HZdkhzMgA9agPJ4ndXuCNRPHFQsRLue3MM9svdhMq7seVKo-M1_w8Geb6e9bwfnkf1-l5GR_WW9Cb5XoC9CFDZq07NOk-FdHkem2__DTh7kZGNzdJdCcDBF3_Ml_NMRdGP4X5rLkCnTj4pFw1PsKyGWeNeeRo1Kaw6sVejV2-b9UvqDx8M7OiqeUGAMbZI18QcUzGkQj1WIo-46c-eWpfFemdTMFI2KxwfIw7_hVcij_TA_MuYKYOtWOYrGKzw9Bf8AVNo  
2018-05-28 10:11:05.880 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:05.880 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:05.881 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/index.html"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\index.html"'
2018-05-28 10:11:05.881 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1.5293ms 200 text/html
2018-05-28 10:11:05.897 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/inline.78df45e1d848f9b8be07.bundle.js  
2018-05-28 10:11:05.897 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:05.898 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:05.898 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/inline.78df45e1d848f9b8be07.bundle.js"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\inline.78df45e1d848f9b8be07.bundle.js"'
2018-05-28 10:11:05.899 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 2.4813ms 200 application/javascript
2018-05-28 10:11:05.903 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/main.cd4b50dbae5725cb97c3.bundle.js  
2018-05-28 10:11:05.904 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:05.905 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:05.905 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/main.cd4b50dbae5725cb97c3.bundle.js"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\main.cd4b50dbae5725cb97c3.bundle.js"'
2018-05-28 10:11:05.909 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/polyfills.1617031006fd4c78c4d6.bundle.js  
2018-05-28 10:11:05.910 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:05.911 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:05.912 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/polyfills.1617031006fd4c78c4d6.bundle.js"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\polyfills.1617031006fd4c78c4d6.bundle.js"'
2018-05-28 10:11:05.914 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 4.2899ms 200 application/javascript
2018-05-28 10:11:05.914 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/scripts.ed8e74a7b04b82c96512.bundle.js  
2018-05-28 10:11:05.915 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:05.915 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:05.916 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/scripts.ed8e74a7b04b82c96512.bundle.js"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\scripts.ed8e74a7b04b82c96512.bundle.js"'
2018-05-28 10:11:05.917 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 2.5494ms 200 application/javascript
2018-05-28 10:11:06.024 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 120.905ms 200 application/javascript
2018-05-28 10:11:06.577 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/.well-known/openid-configuration  
2018-05-28 10:11:06.577 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:06.578 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:06.578 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-05-28 10:11:06.579 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-05-28 10:11:06.580 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-28 10:11:06.581 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"Description\", \"x\".\"DisplayName\", \"x\".\"Emphasize\", \"x\".\"Enabled\", \"x\".\"Name\", \"x\".\"Required\", \"x\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"x\"
ORDER BY \"x\".\"Id\""
2018-05-28 10:11:06.582 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.UserClaims\".\"Id\", \"x.UserClaims\".\"IdentityResourceId\", \"x.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"x.UserClaims\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"IdentityResources\" AS \"x0\"
) AS \"t\" ON \"x.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-28 10:11:06.583 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-28 10:11:06.584 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"Description\", \"x\".\"DisplayName\", \"x\".\"Enabled\", \"x\".\"Name\"
FROM \"ApiResources\" AS \"x\"
ORDER BY \"x\".\"Id\""
2018-05-28 10:11:06.585 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Secrets\".\"Id\", \"x.Secrets\".\"ApiResourceId\", \"x.Secrets\".\"Description\", \"x.Secrets\".\"Expiration\", \"x.Secrets\".\"Type\", \"x.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"x.Secrets\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"ApiResources\" AS \"x0\"
) AS \"t\" ON \"x.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-28 10:11:06.585 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Scopes\".\"Id\", \"x.Scopes\".\"ApiResourceId\", \"x.Scopes\".\"Description\", \"x.Scopes\".\"DisplayName\", \"x.Scopes\".\"Emphasize\", \"x.Scopes\".\"Name\", \"x.Scopes\".\"Required\", \"x.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"x.Scopes\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"ApiResources\" AS \"x1\"
) AS \"t0\" ON \"x.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"x.Scopes\".\"Id\""
2018-05-28 10:11:06.586 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Scopes.UserClaims\".\"Id\", \"x.Scopes.UserClaims\".\"ApiScopeId\", \"x.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"x.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"x.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"x.Scopes0\"
    INNER JOIN (
        SELECT \"x2\".\"Id\"
        FROM \"ApiResources\" AS \"x2\"
    ) AS \"t1\" ON \"x.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"x.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-05-28 10:11:06.586 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.UserClaims\".\"Id\", \"x.UserClaims\".\"ApiResourceId\", \"x.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"x.UserClaims\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"ApiResources\" AS \"x3\"
) AS \"t3\" ON \"x.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-28 10:11:06.587 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 10.418ms 200 application/json; charset=UTF-8
2018-05-28 10:11:06.591 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/avatarImage  
2018-05-28 10:11:06.592 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:06.592 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:06.594 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/index.html"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\index.html"'
2018-05-28 10:11:06.596 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 5.4606ms 200 text/html
2018-05-28 10:11:06.611 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/connect/checksession  
2018-05-28 10:11:06.612 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/assets/images/totvs-avatar-default.svg  
2018-05-28 10:11:06.612 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:06.612 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:06.612 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.CheckSessionEndpoint" for "/connect/checksession"
2018-05-28 10:11:06.613 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1.4316ms 200 text/html; charset=UTF-8
2018-05-28 10:11:06.614 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:06.615 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:06.616 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/assets/images/totvs-avatar-default.svg"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\assets\images\totvs-avatar-default.svg"'
2018-05-28 10:11:06.617 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 4.9616ms 200 image/svg+xml
2018-05-28 10:11:08.316 -03:00 [INFO] Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor Executing ViewResult, running view at path "/Views/Account/Login.cshtml".
2018-05-28 10:11:08.547 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executed action "Tnf.Rac.OpenIdOAuth2.Controllers.AccountController.Login (Tnf.Rac.OpenIdOAuth2)" in 4335.3922ms
2018-05-28 10:11:08.551 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 4411.7924ms 200 text/html; charset=utf-8
2018-05-28 10:11:08.571 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/css/guideline-login.css  
2018-05-28 10:11:08.572 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:08.572 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:08.572 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/css/guideline-login.css"'. Physical path: '"N/A"'
2018-05-28 10:11:08.572 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1.2017ms 200 text/css
2018-05-28 10:11:08.576 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/css/guideline.css  
2018-05-28 10:11:08.581 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:08.582 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:08.584 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/css/guideline.css"'. Physical path: '"N/A"'
2018-05-28 10:11:08.586 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 11.8916ms 200 text/css
2018-05-28 10:11:08.591 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/css/slider.css  
2018-05-28 10:11:08.591 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:08.592 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:08.597 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/css/slider.css"'. Physical path: '"N/A"'
2018-05-28 10:11:08.600 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 9.0982ms 200 text/css
2018-05-28 10:11:08.607 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/img/logo_totvs.png  
2018-05-28 10:11:08.608 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:08.608 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:08.608 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/img/logo_totvs.png"'. Physical path: '"N/A"'
2018-05-28 10:11:08.608 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1.4168ms 200 image/png
2018-05-28 10:11:08.613 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/svg/logo_grey.svg  
2018-05-28 10:11:08.614 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:08.614 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:08.614 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/svg/logo_grey.svg"'. Physical path: '"N/A"'
2018-05-28 10:11:08.614 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1.4841ms 200 image/svg+xml
2018-05-28 10:11:09.464 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/fonts/NunitoSans-Regular.ttf  
2018-05-28 10:11:09.464 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-05-28 10:11:09.465 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:09.465 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:09.466 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/fonts/NunitoSans-Regular.ttf"'. Physical path: '"N/A"'
2018-05-28 10:11:09.467 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 2.6312ms 200 application/x-font-ttf
2018-05-28 10:11:09.469 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/svg/user_blue.svg  
2018-05-28 10:11:09.471 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:09.471 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:09.472 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/svg/user_blue.svg"'. Physical path: '"N/A"'
2018-05-28 10:11:09.472 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 3.3484ms 200 image/svg+xml
2018-05-28 10:11:09.475 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/fonts/NunitoSans-ExtraLight.ttf  
2018-05-28 10:11:09.475 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-05-28 10:11:09.476 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:09.476 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:09.476 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/fonts/NunitoSans-ExtraLight.ttf"'. Physical path: '"N/A"'
2018-05-28 10:11:09.476 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/svg/lock_blue.svg  
2018-05-28 10:11:09.478 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 3.4214ms 200 application/x-font-ttf
2018-05-28 10:11:09.478 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:09.480 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:09.481 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/svg/lock_blue.svg"'. Physical path: '"N/A"'
2018-05-28 10:11:09.483 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 7.4765ms 200 image/svg+xml
2018-05-28 10:11:09.484 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/fonts/NunitoSans-Bold.ttf  
2018-05-28 10:11:09.485 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-05-28 10:11:09.486 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:09.487 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:09.488 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/svg/x_gray.svg  
2018-05-28 10:11:09.488 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/fonts/NunitoSans-Bold.ttf"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\fonts\NunitoSans-Bold.ttf"'
2018-05-28 10:11:09.489 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:09.489 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 5.303ms 200 application/x-font-ttf
2018-05-28 10:11:09.490 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:09.491 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/svg/x_gray.svg"'. Physical path: '"N/A"'
2018-05-28 10:11:09.491 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 3.6957ms 200 image/svg+xml
2018-05-28 10:11:17.043 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 POST http://localhost/rac/account/login?returnUrl=%2Frac%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Drac_oidc%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%252Frac%252Fauth-callback%26response_type%3Dcode%2520id_token%2520token%26scope%3Dopenid%2520profile%2520email%2520authorization_api%2520management_api%2520offline_access%26state%3Dad2994a8483f43e3ab2b987188f7be19%26nonce%3D583c627ae03d4ff1a4781cc007c30dfd application/x-www-form-urlencoded 634
2018-05-28 10:11:17.043 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-05-28 10:11:17.044 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:17.044 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:17.079 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executing action method "Tnf.Rac.OpenIdOAuth2.Controllers.AccountController.Login (Tnf.Rac.OpenIdOAuth2)" with arguments (["Tnf.Rac.OpenIdOAuth2.ViewModels.LoginInputViewModel"]) - ModelState is Valid
2018-05-28 10:11:17.170 -03:00 [INFO] Tnf.Rac.Authorization.ExternalAuthentication.TnfExternalAuthenticationSource ExtenalAuthentication -> TryAuthenticateAsync settings of external url authentication not found for tenant 
2018-05-28 10:11:17.683 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:17.694 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" signed in.
2018-05-28 10:11:17.700 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Formatters.Json.Internal.JsonResultExecutor Executing JsonResult, writing value "{ TargetUrl = /rac/connect/authorize/callback?client_id=rac_oidc&redirect_uri=http%3A%2F%2Flocalhost%2Frac%2Fauth-callback&response_type=code%20id_token%20token&scope=openid%20profile%20email%20authorization_api%20management_api%20offline_access&state=ad2994a8483f43e3ab2b987188f7be19&nonce=583c627ae03d4ff1a4781cc007c30dfd }".
2018-05-28 10:11:17.705 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executed action "Tnf.Rac.OpenIdOAuth2.Controllers.AccountController.Login (Tnf.Rac.OpenIdOAuth2)" in 650.6215ms
2018-05-28 10:11:17.707 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 664.029ms 302 application/json; charset=utf-8
2018-05-28 10:11:17.711 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/connect/authorize/callback?client_id=rac_oidc&redirect_uri=http%3A%2F%2Flocalhost%2Frac%2Fauth-callback&response_type=code%20id_token%20token&scope=openid%20profile%20email%20authorization_api%20management_api%20offline_access&state=ad2994a8483f43e3ab2b987188f7be19&nonce=583c627ae03d4ff1a4781cc007c30dfd  
2018-05-28 10:11:17.712 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:17.712 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:17.714 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeCallbackEndpoint" for "/connect/authorize/callback"
2018-05-28 10:11:17.724 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:17.731 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-05-28 10:11:17.739 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-28 10:11:17.741 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-05-28 10:11:17.742 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-28 10:11:17.742 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-05-28 10:11:17.743 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-05-28 10:11:17.743 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-05-28 10:11:17.745 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-28 10:11:17.745 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-05-28 10:11:17.745 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-05-28 10:11:17.745 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-05-28 10:11:17.746 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-05-28 10:11:17.747 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-28 10:11:17.749 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
ORDER BY \"identityResource\".\"Id\""
2018-05-28 10:11:17.750 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource.UserClaims\".\"Id\", \"identityResource.UserClaims\".\"IdentityResourceId\", \"identityResource.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"identityResource.UserClaims\"
INNER JOIN (
    SELECT \"identityResource0\".\"Id\"
    FROM \"IdentityResources\" AS \"identityResource0\"
    WHERE \"identityResource0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
) AS \"t\" ON \"identityResource.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-28 10:11:17.753 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-28 10:11:17.755 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-05-28 10:11:17.755 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-28 10:11:17.756 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-05-28 10:11:17.757 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-05-28 10:11:17.757 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-28 10:11:17.759 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-28 10:11:17.764 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
ORDER BY \"identityResource\".\"Id\""
2018-05-28 10:11:17.765 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource.UserClaims\".\"Id\", \"identityResource.UserClaims\".\"IdentityResourceId\", \"identityResource.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"identityResource.UserClaims\"
INNER JOIN (
    SELECT \"identityResource0\".\"Id\"
    FROM \"IdentityResources\" AS \"identityResource0\"
    WHERE \"identityResource0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
) AS \"t\" ON \"identityResource.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-28 10:11:17.767 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-28 10:11:17.768 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-05-28 10:11:17.769 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-28 10:11:17.770 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-05-28 10:11:17.770 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-05-28 10:11:17.771 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-28 10:11:17.772 -03:00 [INFO] IdentityServer4.Endpoints.AuthorizeCallbackEndpoint ValidatedAuthorizeRequest
"{
  \"ClientId\": \"rac_oidc\",
  \"ClientName\": \"OIDC Client for RAC\",
  \"RedirectUri\": \"http://localhost/rac/auth-callback\",
  \"AllowedRedirectUris\": [
    \"http://localhost:5000/auth-callback\",
    \"http://localhost/rac/auth-callback\",
    \"http://localhost/rac/assets/silent-renew.html\",
    \"http://localhost:5000/assets/silent-renew.html\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"code id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"hybrid\",
  \"RequestedScopes\": \"openid profile email authorization_api management_api offline_access\",
  \"State\": \"ad2994a8483f43e3ab2b987188f7be19\",
  \"Nonce\": \"583c627ae03d4ff1a4781cc007c30dfd\",
  \"Raw\": {
    \"client_id\": \"rac_oidc\",
    \"redirect_uri\": \"http://localhost/rac/auth-callback\",
    \"response_type\": \"code id_token token\",
    \"scope\": \"openid profile email authorization_api management_api offline_access\",
    \"state\": \"ad2994a8483f43e3ab2b987188f7be19\",
    \"nonce\": \"583c627ae03d4ff1a4781cc007c30dfd\"
  }
}"
2018-05-28 10:11:17.772 -03:00 [INFO] IdentityServer4.ResponseHandling.AuthorizeInteractionResponseGenerator Showing login: User is not authenticated
2018-05-28 10:11:17.772 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 60.8931ms 302 
2018-05-28 10:11:17.778 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/account/login?returnUrl=%2Frac%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Drac_oidc%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%252Frac%252Fauth-callback%26response_type%3Dcode%2520id_token%2520token%26scope%3Dopenid%2520profile%2520email%2520authorization_api%2520management_api%2520offline_access%26state%3Dad2994a8483f43e3ab2b987188f7be19%26nonce%3D583c627ae03d4ff1a4781cc007c30dfd  
2018-05-28 10:11:17.778 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:17.778 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:17.781 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executing action method "Tnf.Rac.OpenIdOAuth2.Controllers.AccountController.Login (Tnf.Rac.OpenIdOAuth2)" with arguments (["/rac/connect/authorize/callback?client_id=rac_oidc&redirect_uri=http%3A%2F%2Flocalhost%2Frac%2Fauth-callback&response_type=code%20id_token%20token&scope=openid%20profile%20email%20authorization_api%20management_api%20offline_access&state=ad2994a8483f43e3ab2b987188f7be19&nonce=583c627ae03d4ff1a4781cc007c30dfd"]) - ModelState is Valid
2018-05-28 10:11:17.781 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:17.782 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-05-28 10:11:17.783 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-28 10:11:17.785 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-05-28 10:11:17.786 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-28 10:11:17.786 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-05-28 10:11:17.787 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-05-28 10:11:17.787 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-05-28 10:11:17.788 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-28 10:11:17.788 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-05-28 10:11:17.788 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-05-28 10:11:17.789 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-05-28 10:11:17.789 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-05-28 10:11:17.791 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-28 10:11:17.793 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
ORDER BY \"identityResource\".\"Id\""
2018-05-28 10:11:17.794 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource.UserClaims\".\"Id\", \"identityResource.UserClaims\".\"IdentityResourceId\", \"identityResource.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"identityResource.UserClaims\"
INNER JOIN (
    SELECT \"identityResource0\".\"Id\"
    FROM \"IdentityResources\" AS \"identityResource0\"
    WHERE \"identityResource0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
) AS \"t\" ON \"identityResource.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-28 10:11:17.797 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-28 10:11:17.799 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-05-28 10:11:17.800 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-28 10:11:17.800 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-05-28 10:11:17.801 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-05-28 10:11:17.802 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-28 10:11:17.804 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-28 10:11:17.805 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
ORDER BY \"identityResource\".\"Id\""
2018-05-28 10:11:17.806 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource.UserClaims\".\"Id\", \"identityResource.UserClaims\".\"IdentityResourceId\", \"identityResource.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"identityResource.UserClaims\"
INNER JOIN (
    SELECT \"identityResource0\".\"Id\"
    FROM \"IdentityResources\" AS \"identityResource0\"
    WHERE \"identityResource0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
) AS \"t\" ON \"identityResource.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-28 10:11:17.808 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-28 10:11:17.811 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-05-28 10:11:17.813 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-28 10:11:17.814 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-05-28 10:11:17.814 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-05-28 10:11:17.815 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-28 10:11:17.819 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-28 10:11:17.821 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("2"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-05-28 10:11:17.823 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-28 10:11:17.823 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-05-28 10:11:17.824 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-05-28 10:11:17.824 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-05-28 10:11:17.825 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-28 10:11:17.826 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-05-28 10:11:17.827 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-05-28 10:11:17.827 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-05-28 10:11:17.827 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-05-28 10:11:17.829 -03:00 [INFO] Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor Executing ViewResult, running view at path "/Views/Account/Login.cshtml".
2018-05-28 10:11:17.834 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executed action "Tnf.Rac.OpenIdOAuth2.Controllers.AccountController.Login (Tnf.Rac.OpenIdOAuth2)" in 55.0721ms
2018-05-28 10:11:17.835 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 57.3771ms 200 text/html; charset=utf-8
2018-05-28 10:11:17.858 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/css/guideline-login.css  
2018-05-28 10:11:17.859 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:17.859 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:17.859 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/css/guideline-login.css"'. Physical path: '"N/A"'
2018-05-28 10:11:17.859 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1.3914ms 200 text/css
2018-05-28 10:11:17.861 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/css/guideline.css  
2018-05-28 10:11:17.862 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:17.862 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:17.862 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/css/guideline.css"'. Physical path: '"N/A"'
2018-05-28 10:11:17.863 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1.6491ms 200 text/css
2018-05-28 10:11:17.864 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/css/slider.css  
2018-05-28 10:11:17.866 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:17.867 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:17.868 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/css/slider.css"'. Physical path: '"N/A"'
2018-05-28 10:11:17.869 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 5.4422ms 200 text/css
2018-05-28 10:11:17.878 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/img/logo_totvs.png  
2018-05-28 10:11:17.879 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:17.879 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:17.880 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/img/logo_totvs.png"'. Physical path: '"N/A"'
2018-05-28 10:11:17.881 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 2.7211ms 200 image/png
2018-05-28 10:11:17.902 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/svg/logo_grey.svg  
2018-05-28 10:11:17.904 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:17.905 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:17.905 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/svg/logo_grey.svg"'. Physical path: '"N/A"'
2018-05-28 10:11:17.906 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 3.7976ms 200 image/svg+xml
2018-05-28 10:11:18.126 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/fonts/NunitoSans-Regular.ttf  
2018-05-28 10:11:18.126 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-05-28 10:11:18.128 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:18.128 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:18.129 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/fonts/NunitoSans-Regular.ttf"'. Physical path: '"N/A"'
2018-05-28 10:11:18.131 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/svg/lock_blue.svg  
2018-05-28 10:11:18.131 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 5.4814ms 200 application/x-font-ttf
2018-05-28 10:11:18.133 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:18.133 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:18.134 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/svg/lock_blue.svg"'. Physical path: '"N/A"'
2018-05-28 10:11:18.134 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 3.121ms 200 image/svg+xml
2018-05-28 10:11:18.140 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/fonts/NunitoSans-ExtraLight.ttf  
2018-05-28 10:11:18.141 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-05-28 10:11:18.144 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:18.144 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:18.145 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/fonts/NunitoSans-ExtraLight.ttf"'. Physical path: '"N/A"'
2018-05-28 10:11:18.145 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/svg/x_gray.svg  
2018-05-28 10:11:18.146 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 5.9331ms 200 application/x-font-ttf
2018-05-28 10:11:18.146 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:18.146 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:18.147 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/svg/x_gray.svg"'. Physical path: '"N/A"'
2018-05-28 10:11:18.147 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1.446ms 200 image/svg+xml
2018-05-28 10:11:18.148 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/svg/user_blue.svg  
2018-05-28 10:11:18.150 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:18.151 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:18.152 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/svg/user_blue.svg"'. Physical path: '"N/A"'
2018-05-28 10:11:18.152 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 3.4129ms 200 image/svg+xml
2018-05-28 10:11:18.155 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/fonts/NunitoSans-Bold.ttf  
2018-05-28 10:11:18.156 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-05-28 10:11:18.158 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:18.158 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:18.158 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/fonts/NunitoSans-Bold.ttf"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\fonts\NunitoSans-Bold.ttf"'
2018-05-28 10:11:18.160 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 5.7945ms 200 application/x-font-ttf
2018-05-28 10:11:27.109 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 POST http://localhost/rac/account/login?returnUrl=%2Frac%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Drac_oidc%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%252Frac%252Fauth-callback%26response_type%3Dcode%2520id_token%2520token%26scope%3Dopenid%2520profile%2520email%2520authorization_api%2520management_api%2520offline_access%26state%3Dad2994a8483f43e3ab2b987188f7be19%26nonce%3D583c627ae03d4ff1a4781cc007c30dfd application/x-www-form-urlencoded 634
2018-05-28 10:11:27.109 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-05-28 10:11:27.110 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:27.110 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:27.112 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executing action method "Tnf.Rac.OpenIdOAuth2.Controllers.AccountController.Login (Tnf.Rac.OpenIdOAuth2)" with arguments (["Tnf.Rac.OpenIdOAuth2.ViewModels.LoginInputViewModel"]) - ModelState is Valid
2018-05-28 10:11:27.113 -03:00 [INFO] Tnf.Rac.Authorization.ExternalAuthentication.TnfExternalAuthenticationSource ExtenalAuthentication -> TryAuthenticateAsync settings of external url authentication not found for tenant 
2018-05-28 10:11:27.167 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:27.167 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler AuthenticationScheme: "Identity.Application" signed in.
2018-05-28 10:11:27.167 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Formatters.Json.Internal.JsonResultExecutor Executing JsonResult, writing value "{ TargetUrl = /rac/connect/authorize/callback?client_id=rac_oidc&redirect_uri=http%3A%2F%2Flocalhost%2Frac%2Fauth-callback&response_type=code%20id_token%20token&scope=openid%20profile%20email%20authorization_api%20management_api%20offline_access&state=ad2994a8483f43e3ab2b987188f7be19&nonce=583c627ae03d4ff1a4781cc007c30dfd }".
2018-05-28 10:11:27.168 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executed action "Tnf.Rac.OpenIdOAuth2.Controllers.AccountController.Login (Tnf.Rac.OpenIdOAuth2)" in 57.6987ms
2018-05-28 10:11:27.168 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 59.3038ms 302 application/json; charset=utf-8
2018-05-28 10:11:27.172 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/connect/authorize/callback?client_id=rac_oidc&redirect_uri=http%3A%2F%2Flocalhost%2Frac%2Fauth-callback&response_type=code%20id_token%20token&scope=openid%20profile%20email%20authorization_api%20management_api%20offline_access&state=ad2994a8483f43e3ab2b987188f7be19&nonce=583c627ae03d4ff1a4781cc007c30dfd  
2018-05-28 10:11:27.172 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:27.172 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:27.173 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeCallbackEndpoint" for "/connect/authorize/callback"
2018-05-28 10:11:27.174 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:27.174 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-05-28 10:11:27.181 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-28 10:11:27.183 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-05-28 10:11:27.184 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-28 10:11:27.184 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-05-28 10:11:27.184 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-05-28 10:11:27.185 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-05-28 10:11:27.185 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-28 10:11:27.185 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-05-28 10:11:27.185 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-05-28 10:11:27.185 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-05-28 10:11:27.186 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-05-28 10:11:27.187 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-28 10:11:27.188 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
ORDER BY \"identityResource\".\"Id\""
2018-05-28 10:11:27.189 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource.UserClaims\".\"Id\", \"identityResource.UserClaims\".\"IdentityResourceId\", \"identityResource.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"identityResource.UserClaims\"
INNER JOIN (
    SELECT \"identityResource0\".\"Id\"
    FROM \"IdentityResources\" AS \"identityResource0\"
    WHERE \"identityResource0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
) AS \"t\" ON \"identityResource.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-28 10:11:27.190 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-28 10:11:27.192 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-05-28 10:11:27.193 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-28 10:11:27.193 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-05-28 10:11:27.194 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-05-28 10:11:27.194 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-28 10:11:27.196 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-28 10:11:27.198 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
ORDER BY \"identityResource\".\"Id\""
2018-05-28 10:11:27.199 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource.UserClaims\".\"Id\", \"identityResource.UserClaims\".\"IdentityResourceId\", \"identityResource.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"identityResource.UserClaims\"
INNER JOIN (
    SELECT \"identityResource0\".\"Id\"
    FROM \"IdentityResources\" AS \"identityResource0\"
    WHERE \"identityResource0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
) AS \"t\" ON \"identityResource.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-28 10:11:27.200 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-28 10:11:27.201 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-05-28 10:11:27.202 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-28 10:11:27.202 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-05-28 10:11:27.202 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-05-28 10:11:27.203 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-28 10:11:27.203 -03:00 [INFO] IdentityServer4.Endpoints.AuthorizeCallbackEndpoint ValidatedAuthorizeRequest
"{
  \"ClientId\": \"rac_oidc\",
  \"ClientName\": \"OIDC Client for RAC\",
  \"RedirectUri\": \"http://localhost/rac/auth-callback\",
  \"AllowedRedirectUris\": [
    \"http://localhost:5000/auth-callback\",
    \"http://localhost/rac/auth-callback\",
    \"http://localhost/rac/assets/silent-renew.html\",
    \"http://localhost:5000/assets/silent-renew.html\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"code id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"hybrid\",
  \"RequestedScopes\": \"openid profile email authorization_api management_api offline_access\",
  \"State\": \"ad2994a8483f43e3ab2b987188f7be19\",
  \"Nonce\": \"583c627ae03d4ff1a4781cc007c30dfd\",
  \"Raw\": {
    \"client_id\": \"rac_oidc\",
    \"redirect_uri\": \"http://localhost/rac/auth-callback\",
    \"response_type\": \"code id_token token\",
    \"scope\": \"openid profile email authorization_api management_api offline_access\",
    \"state\": \"ad2994a8483f43e3ab2b987188f7be19\",
    \"nonce\": \"583c627ae03d4ff1a4781cc007c30dfd\"
  }
}"
2018-05-28 10:11:27.203 -03:00 [INFO] IdentityServer4.ResponseHandling.AuthorizeInteractionResponseGenerator Showing login: User is not authenticated
2018-05-28 10:11:27.203 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 31.6368ms 302 
2018-05-28 10:11:27.207 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/account/login?returnUrl=%2Frac%2Fconnect%2Fauthorize%2Fcallback%3Fclient_id%3Drac_oidc%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%252Frac%252Fauth-callback%26response_type%3Dcode%2520id_token%2520token%26scope%3Dopenid%2520profile%2520email%2520authorization_api%2520management_api%2520offline_access%26state%3Dad2994a8483f43e3ab2b987188f7be19%26nonce%3D583c627ae03d4ff1a4781cc007c30dfd  
2018-05-28 10:11:27.207 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:27.207 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:27.209 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executing action method "Tnf.Rac.OpenIdOAuth2.Controllers.AccountController.Login (Tnf.Rac.OpenIdOAuth2)" with arguments (["/rac/connect/authorize/callback?client_id=rac_oidc&redirect_uri=http%3A%2F%2Flocalhost%2Frac%2Fauth-callback&response_type=code%20id_token%20token&scope=openid%20profile%20email%20authorization_api%20management_api%20offline_access&state=ad2994a8483f43e3ab2b987188f7be19&nonce=583c627ae03d4ff1a4781cc007c30dfd"]) - ModelState is Valid
2018-05-28 10:11:27.209 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:27.210 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-05-28 10:11:27.211 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-28 10:11:27.212 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-05-28 10:11:27.213 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-28 10:11:27.213 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-05-28 10:11:27.213 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-05-28 10:11:27.214 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-05-28 10:11:27.214 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-28 10:11:27.214 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-05-28 10:11:27.215 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-05-28 10:11:27.215 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-05-28 10:11:27.215 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-05-28 10:11:27.216 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-28 10:11:27.217 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
ORDER BY \"identityResource\".\"Id\""
2018-05-28 10:11:27.218 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource.UserClaims\".\"Id\", \"identityResource.UserClaims\".\"IdentityResourceId\", \"identityResource.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"identityResource.UserClaims\"
INNER JOIN (
    SELECT \"identityResource0\".\"Id\"
    FROM \"IdentityResources\" AS \"identityResource0\"
    WHERE \"identityResource0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
) AS \"t\" ON \"identityResource.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-28 10:11:27.219 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-28 10:11:27.220 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-05-28 10:11:27.221 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-28 10:11:27.221 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-05-28 10:11:27.222 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-05-28 10:11:27.222 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-28 10:11:27.223 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-28 10:11:27.224 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource\".\"Id\", \"identityResource\".\"Description\", \"identityResource\".\"DisplayName\", \"identityResource\".\"Emphasize\", \"identityResource\".\"Enabled\", \"identityResource\".\"Name\", \"identityResource\".\"Required\", \"identityResource\".\"ShowInDiscoveryDocument\"
FROM \"IdentityResources\" AS \"identityResource\"
WHERE \"identityResource\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
ORDER BY \"identityResource\".\"Id\""
2018-05-28 10:11:27.225 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"identityResource.UserClaims\".\"Id\", \"identityResource.UserClaims\".\"IdentityResourceId\", \"identityResource.UserClaims\".\"Type\"
FROM \"IdentityClaims\" AS \"identityResource.UserClaims\"
INNER JOIN (
    SELECT \"identityResource0\".\"Id\"
    FROM \"IdentityResources\" AS \"identityResource0\"
    WHERE \"identityResource0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api')
) AS \"t\" ON \"identityResource.UserClaims\".\"IdentityResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-28 10:11:27.226 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-28 10:11:27.228 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api\".\"Id\", \"api\".\"Description\", \"api\".\"DisplayName\", \"api\".\"Enabled\", \"api\".\"Name\"
FROM \"ApiResources\" AS \"api\"
WHERE EXISTS (
    SELECT 1
    FROM \"ApiScopes\" AS \"x\"
    WHERE \"x\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api\".\"Id\" = \"x\".\"ApiResourceId\"))
ORDER BY \"api\".\"Id\""
2018-05-28 10:11:27.229 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Secrets\".\"Id\", \"api.Secrets\".\"ApiResourceId\", \"api.Secrets\".\"Description\", \"api.Secrets\".\"Expiration\", \"api.Secrets\".\"Type\", \"api.Secrets\".\"Value\"
FROM \"ApiSecrets\" AS \"api.Secrets\"
INNER JOIN (
    SELECT \"api0\".\"Id\"
    FROM \"ApiResources\" AS \"api0\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x0\"
        WHERE \"x0\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api0\".\"Id\" = \"x0\".\"ApiResourceId\"))
) AS \"t\" ON \"api.Secrets\".\"ApiResourceId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-28 10:11:27.229 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes\".\"Id\", \"api.Scopes\".\"ApiResourceId\", \"api.Scopes\".\"Description\", \"api.Scopes\".\"DisplayName\", \"api.Scopes\".\"Emphasize\", \"api.Scopes\".\"Name\", \"api.Scopes\".\"Required\", \"api.Scopes\".\"ShowInDiscoveryDocument\"
FROM \"ApiScopes\" AS \"api.Scopes\"
INNER JOIN (
    SELECT \"api1\".\"Id\"
    FROM \"ApiResources\" AS \"api1\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x1\"
        WHERE \"x1\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api1\".\"Id\" = \"x1\".\"ApiResourceId\"))
) AS \"t0\" ON \"api.Scopes\".\"ApiResourceId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\", \"api.Scopes\".\"Id\""
2018-05-28 10:11:27.230 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.Scopes.UserClaims\".\"Id\", \"api.Scopes.UserClaims\".\"ApiScopeId\", \"api.Scopes.UserClaims\".\"Type\"
FROM \"ApiScopeClaims\" AS \"api.Scopes.UserClaims\"
INNER JOIN (
    SELECT DISTINCT \"api.Scopes0\".\"Id\", \"t1\".\"Id\" AS \"Id0\"
    FROM \"ApiScopes\" AS \"api.Scopes0\"
    INNER JOIN (
        SELECT \"api2\".\"Id\"
        FROM \"ApiResources\" AS \"api2\"
        WHERE EXISTS (
            SELECT 1
            FROM \"ApiScopes\" AS \"x2\"
            WHERE \"x2\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api2\".\"Id\" = \"x2\".\"ApiResourceId\"))
    ) AS \"t1\" ON \"api.Scopes0\".\"ApiResourceId\" = \"t1\".\"Id\"
) AS \"t2\" ON \"api.Scopes.UserClaims\".\"ApiScopeId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id0\", \"t2\".\"Id\""
2018-05-28 10:11:27.230 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"api.UserClaims\".\"Id\", \"api.UserClaims\".\"ApiResourceId\", \"api.UserClaims\".\"Type\"
FROM \"ApiClaims\" AS \"api.UserClaims\"
INNER JOIN (
    SELECT \"api3\".\"Id\"
    FROM \"ApiResources\" AS \"api3\"
    WHERE EXISTS (
        SELECT 1
        FROM \"ApiScopes\" AS \"x3\"
        WHERE \"x3\".\"Name\" IN ('openid', 'profile', 'email', 'authorization_api', 'management_api') AND (\"api3\".\"Id\" = \"x3\".\"ApiResourceId\"))
) AS \"t3\" ON \"api.UserClaims\".\"ApiResourceId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-28 10:11:27.231 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-28 10:11:27.232 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x\".\"Id\", \"x\".\"AbsoluteRefreshTokenLifetime\", \"x\".\"AccessTokenLifetime\", \"x\".\"AccessTokenType\", \"x\".\"AllowAccessTokensViaBrowser\", \"x\".\"AllowOfflineAccess\", \"x\".\"AllowPlainTextPkce\", \"x\".\"AllowRememberConsent\", \"x\".\"AlwaysIncludeUserClaimsInIdToken\", \"x\".\"AlwaysSendClientClaims\", \"x\".\"AuthorizationCodeLifetime\", \"x\".\"BackChannelLogoutSessionRequired\", \"x\".\"BackChannelLogoutUri\", \"x\".\"ClientClaimsPrefix\", \"x\".\"ClientId\", \"x\".\"ClientName\", \"x\".\"ClientUri\", \"x\".\"ConsentLifetime\", \"x\".\"Description\", \"x\".\"EnableLocalLogin\", \"x\".\"Enabled\", \"x\".\"FrontChannelLogoutSessionRequired\", \"x\".\"FrontChannelLogoutUri\", \"x\".\"IdentityTokenLifetime\", \"x\".\"IncludeJwtId\", \"x\".\"LogoUri\", \"x\".\"PairWiseSubjectSalt\", \"x\".\"ProtocolType\", \"x\".\"RefreshTokenExpiration\", \"x\".\"RefreshTokenUsage\", \"x\".\"RequireClientSecret\", \"x\".\"RequireConsent\", \"x\".\"RequirePkce\", \"x\".\"SlidingRefreshTokenLifetime\", \"x\".\"UpdateAccessTokenClaimsOnRefresh\"
FROM \"Clients\" AS \"x\"
WHERE \"x\".\"ClientId\" = @__clientId_0
ORDER BY \"x\".\"Id\"
LIMIT 1"
2018-05-28 10:11:27.232 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedGrantTypes\".\"Id\", \"x.AllowedGrantTypes\".\"ClientId\", \"x.AllowedGrantTypes\".\"GrantType\"
FROM \"ClientGrantTypes\" AS \"x.AllowedGrantTypes\"
INNER JOIN (
    SELECT \"x0\".\"Id\"
    FROM \"Clients\" AS \"x0\"
    WHERE \"x0\".\"ClientId\" = @__clientId_0
    ORDER BY \"x0\".\"Id\"
    LIMIT 1
) AS \"t\" ON \"x.AllowedGrantTypes\".\"ClientId\" = \"t\".\"Id\"
ORDER BY \"t\".\"Id\""
2018-05-28 10:11:27.233 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.RedirectUris\".\"Id\", \"x.RedirectUris\".\"ClientId\", \"x.RedirectUris\".\"RedirectUri\"
FROM \"ClientRedirectUris\" AS \"x.RedirectUris\"
INNER JOIN (
    SELECT \"x1\".\"Id\"
    FROM \"Clients\" AS \"x1\"
    WHERE \"x1\".\"ClientId\" = @__clientId_0
    ORDER BY \"x1\".\"Id\"
    LIMIT 1
) AS \"t0\" ON \"x.RedirectUris\".\"ClientId\" = \"t0\".\"Id\"
ORDER BY \"t0\".\"Id\""
2018-05-28 10:11:27.233 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.PostLogoutRedirectUris\".\"Id\", \"x.PostLogoutRedirectUris\".\"ClientId\", \"x.PostLogoutRedirectUris\".\"PostLogoutRedirectUri\"
FROM \"ClientPostLogoutRedirectUris\" AS \"x.PostLogoutRedirectUris\"
INNER JOIN (
    SELECT \"x2\".\"Id\"
    FROM \"Clients\" AS \"x2\"
    WHERE \"x2\".\"ClientId\" = @__clientId_0
    ORDER BY \"x2\".\"Id\"
    LIMIT 1
) AS \"t1\" ON \"x.PostLogoutRedirectUris\".\"ClientId\" = \"t1\".\"Id\"
ORDER BY \"t1\".\"Id\""
2018-05-28 10:11:27.233 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedScopes\".\"Id\", \"x.AllowedScopes\".\"ClientId\", \"x.AllowedScopes\".\"Scope\"
FROM \"ClientScopes\" AS \"x.AllowedScopes\"
INNER JOIN (
    SELECT \"x3\".\"Id\"
    FROM \"Clients\" AS \"x3\"
    WHERE \"x3\".\"ClientId\" = @__clientId_0
    ORDER BY \"x3\".\"Id\"
    LIMIT 1
) AS \"t2\" ON \"x.AllowedScopes\".\"ClientId\" = \"t2\".\"Id\"
ORDER BY \"t2\".\"Id\""
2018-05-28 10:11:27.233 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.ClientSecrets\".\"Id\", \"x.ClientSecrets\".\"ClientId\", \"x.ClientSecrets\".\"Description\", \"x.ClientSecrets\".\"Expiration\", \"x.ClientSecrets\".\"Type\", \"x.ClientSecrets\".\"Value\"
FROM \"ClientSecrets\" AS \"x.ClientSecrets\"
INNER JOIN (
    SELECT \"x4\".\"Id\"
    FROM \"Clients\" AS \"x4\"
    WHERE \"x4\".\"ClientId\" = @__clientId_0
    ORDER BY \"x4\".\"Id\"
    LIMIT 1
) AS \"t3\" ON \"x.ClientSecrets\".\"ClientId\" = \"t3\".\"Id\"
ORDER BY \"t3\".\"Id\""
2018-05-28 10:11:27.233 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Claims\".\"Id\", \"x.Claims\".\"ClientId\", \"x.Claims\".\"Type\", \"x.Claims\".\"Value\"
FROM \"ClientClaims\" AS \"x.Claims\"
INNER JOIN (
    SELECT \"x5\".\"Id\"
    FROM \"Clients\" AS \"x5\"
    WHERE \"x5\".\"ClientId\" = @__clientId_0
    ORDER BY \"x5\".\"Id\"
    LIMIT 1
) AS \"t4\" ON \"x.Claims\".\"ClientId\" = \"t4\".\"Id\"
ORDER BY \"t4\".\"Id\""
2018-05-28 10:11:27.233 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.IdentityProviderRestrictions\".\"Id\", \"x.IdentityProviderRestrictions\".\"ClientId\", \"x.IdentityProviderRestrictions\".\"Provider\"
FROM \"ClientIdPRestrictions\" AS \"x.IdentityProviderRestrictions\"
INNER JOIN (
    SELECT \"x6\".\"Id\"
    FROM \"Clients\" AS \"x6\"
    WHERE \"x6\".\"ClientId\" = @__clientId_0
    ORDER BY \"x6\".\"Id\"
    LIMIT 1
) AS \"t5\" ON \"x.IdentityProviderRestrictions\".\"ClientId\" = \"t5\".\"Id\"
ORDER BY \"t5\".\"Id\""
2018-05-28 10:11:27.234 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.AllowedCorsOrigins\".\"Id\", \"x.AllowedCorsOrigins\".\"ClientId\", \"x.AllowedCorsOrigins\".\"Origin\"
FROM \"ClientCorsOrigins\" AS \"x.AllowedCorsOrigins\"
INNER JOIN (
    SELECT \"x7\".\"Id\"
    FROM \"Clients\" AS \"x7\"
    WHERE \"x7\".\"ClientId\" = @__clientId_0
    ORDER BY \"x7\".\"Id\"
    LIMIT 1
) AS \"t6\" ON \"x.AllowedCorsOrigins\".\"ClientId\" = \"t6\".\"Id\"
ORDER BY \"t6\".\"Id\""
2018-05-28 10:11:27.234 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=["@__clientId_0='?'"], CommandType='Text', CommandTimeout='30']"
""SELECT \"x.Properties\".\"Id\", \"x.Properties\".\"ClientId\", \"x.Properties\".\"Key\", \"x.Properties\".\"Value\"
FROM \"ClientProperties\" AS \"x.Properties\"
INNER JOIN (
    SELECT \"x8\".\"Id\"
    FROM \"Clients\" AS \"x8\"
    WHERE \"x8\".\"ClientId\" = @__clientId_0
    ORDER BY \"x8\".\"Id\"
    LIMIT 1
) AS \"t7\" ON \"x.Properties\".\"ClientId\" = \"t7\".\"Id\"
ORDER BY \"t7\".\"Id\""
2018-05-28 10:11:27.234 -03:00 [INFO] Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor Executing ViewResult, running view at path "/Views/Account/Login.cshtml".
2018-05-28 10:11:27.235 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executed action "Tnf.Rac.OpenIdOAuth2.Controllers.AccountController.Login (Tnf.Rac.OpenIdOAuth2)" in 27.1423ms
2018-05-28 10:11:27.235 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 28.2918ms 200 text/html; charset=utf-8
2018-05-28 10:11:27.255 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/css/guideline-login.css  
2018-05-28 10:11:27.255 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/css/guideline.css  
2018-05-28 10:11:27.255 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:27.255 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:27.256 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:27.256 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:27.256 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/css/slider.css  
2018-05-28 10:11:27.256 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/css/guideline.css"'. Physical path: '"N/A"'
2018-05-28 10:11:27.256 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1.379ms 200 text/css
2018-05-28 10:11:27.257 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:27.257 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:27.257 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/css/slider.css"'. Physical path: '"N/A"'
2018-05-28 10:11:27.258 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1.6886ms 200 text/css
2018-05-28 10:11:27.259 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/css/guideline-login.css"'. Physical path: '"N/A"'
2018-05-28 10:11:27.260 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 4.8982ms 200 text/css
2018-05-28 10:11:27.269 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/img/logo_totvs.png  
2018-05-28 10:11:27.273 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:27.273 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:27.274 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/img/logo_totvs.png"'. Physical path: '"N/A"'
2018-05-28 10:11:27.274 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 4.9098ms 200 image/png
2018-05-28 10:11:27.279 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/svg/logo_grey.svg  
2018-05-28 10:11:27.279 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:27.279 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:27.280 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/svg/logo_grey.svg"'. Physical path: '"N/A"'
2018-05-28 10:11:27.280 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1.6576ms 200 image/svg+xml
2018-05-28 10:11:27.512 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/fonts/NunitoSans-ExtraLight.ttf  
2018-05-28 10:11:27.512 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-05-28 10:11:27.513 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:27.513 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:27.513 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/fonts/NunitoSans-ExtraLight.ttf"'. Physical path: '"N/A"'
2018-05-28 10:11:27.514 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 2.2518ms 200 application/x-font-ttf
2018-05-28 10:11:27.514 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/svg/user_blue.svg  
2018-05-28 10:11:27.515 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:27.515 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:27.515 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/svg/user_blue.svg"'. Physical path: '"N/A"'
2018-05-28 10:11:27.515 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1.2514ms 200 image/svg+xml
2018-05-28 10:11:27.518 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/fonts/NunitoSans-Regular.ttf  
2018-05-28 10:11:27.518 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-05-28 10:11:27.519 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:27.520 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:27.522 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/fonts/NunitoSans-Regular.ttf"'. Physical path: '"N/A"'
2018-05-28 10:11:27.523 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 4.6524ms 200 application/x-font-ttf
2018-05-28 10:11:27.524 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/svg/lock_blue.svg  
2018-05-28 10:11:27.525 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:27.526 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:27.526 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/svg/lock_blue.svg"'. Physical path: '"N/A"'
2018-05-28 10:11:27.527 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 2.9313ms 200 image/svg+xml
2018-05-28 10:11:27.528 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/svg/x_gray.svg  
2018-05-28 10:11:27.529 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:27.530 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:27.530 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/svg/x_gray.svg"'. Physical path: '"N/A"'
2018-05-28 10:11:27.531 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 2.7158ms 200 image/svg+xml
2018-05-28 10:11:27.532 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/fonts/NunitoSans-Bold.ttf  
2018-05-28 10:11:27.532 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-05-28 10:11:27.534 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:27.534 -03:00 [INFO] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler "Identity.Application" was not authenticated. Failure message: "Unprotect ticket failed"
2018-05-28 10:11:27.534 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/fonts/NunitoSans-Bold.ttf"'. Physical path: '"D:\git\tnf-samples\Scenarios\Security\Rac\Rac\wwwroot\fonts\NunitoSans-Bold.ttf"'
2018-05-28 10:11:27.536 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 3.8869ms 200 application/x-font-ttf
2018-05-28 10:13:34.609 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost/rac/.well-known/openid-configuration  
2018-05-28 10:13:34.610 -03:00 [INFO] IdentityServer4.Hosting.IdentityServerMiddleware Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-05-28 10:13:34.611 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SqLiteConfigurationDbContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "None"
2018-05-28 10:13:34.612 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-28 10:13:34.614 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType