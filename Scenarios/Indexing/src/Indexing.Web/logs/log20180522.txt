2018-05-22 14:25:40.929 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SampleContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "SensitiveDataLoggingEnabled "
2018-05-22 14:25:41.071 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("44"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-22 14:25:41.078 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-22 14:25:41.081 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*) FROM \"sqlite_master\" WHERE \"name\" = '__EFMigrationsHistory' AND \"type\" = 'table';"
2018-05-22 14:25:41.082 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-22 14:25:41.083 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-22 14:25:41.083 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*) FROM \"sqlite_master\" WHERE \"name\" = '__EFMigrationsHistory' AND \"type\" = 'table';"
2018-05-22 14:25:41.086 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-22 14:25:41.087 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"MigrationId\", \"ProductVersion\"
FROM \"__EFMigrationsHistory\"
ORDER BY \"MigrationId\";"
2018-05-22 14:25:41.108 -03:00 [INFO] Microsoft.EntityFrameworkCore.Migrations No migrations were applied. The database is already up to date.
2018-05-22 14:25:43.046 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/  
2018-05-22 14:25:43.073 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 14:25:43.084 -03:00 [INFO] Tnf.Settings.Internal.SettingDefinitionManager Settings definitions loaded: [Tnf.Localization.DefaultLanguageName,Tnf.Timing.TimeZone]
2018-05-22 14:25:43.092 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 14:25:43.205 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 164.0524ms 302 
2018-05-22 14:25:43.237 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/swagger  
2018-05-22 14:25:43.238 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 14:25:43.239 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 14:25:43.240 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 2.3311ms 301 
2018-05-22 14:25:43.252 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/swagger/  
2018-05-22 14:25:43.252 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 14:25:43.252 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 14:25:43.285 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/swagger/swagger-ui.css  
2018-05-22 14:25:43.285 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 14:25:43.285 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 14:25:43.289 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/swagger/swagger-ui-standalone-preset.js  
2018-05-22 14:25:43.289 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 14:25:43.289 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 14:25:43.293 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 40.5157ms 200 text/html
2018-05-22 14:25:43.301 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware The file "/swagger-ui.css" was not modified
2018-05-22 14:25:43.301 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware The file "/swagger-ui-standalone-preset.js" was not modified
2018-05-22 14:25:43.303 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 18.1601ms 304 text/css
2018-05-22 14:25:43.303 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 13.6596ms 304 application/javascript
2018-05-22 14:25:43.323 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/swagger/swagger-ui-bundle.js  
2018-05-22 14:25:43.324 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 14:25:43.324 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 14:25:43.324 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware The file "/swagger-ui-bundle.js" was not modified
2018-05-22 14:25:43.324 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 0.8674ms 304 application/javascript
2018-05-22 14:25:43.695 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/swagger/v1/swagger.json  
2018-05-22 14:25:43.695 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 14:25:43.695 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 14:25:43.934 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 238.7029ms 200 application/json
2018-05-22 14:26:01.405 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/swagger/  
2018-05-22 14:26:01.405 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 14:26:01.406 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 14:26:01.408 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 2.5998ms 200 text/html
2018-05-22 14:26:01.957 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/swagger/swagger-ui.css  
2018-05-22 14:26:01.958 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 14:26:01.958 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 14:26:01.958 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware The file "/swagger-ui.css" was not modified
2018-05-22 14:26:01.958 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 0.5486ms 304 text/css
2018-05-22 14:26:01.992 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/swagger/swagger-ui-bundle.js  
2018-05-22 14:26:01.992 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 14:26:01.992 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 14:26:01.993 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware The file "/swagger-ui-bundle.js" was not modified
2018-05-22 14:26:01.993 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 0.2947ms 304 application/javascript
2018-05-22 14:26:02.094 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/swagger/swagger-ui-standalone-preset.js  
2018-05-22 14:26:02.094 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 14:26:02.094 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 14:26:02.094 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware The file "/swagger-ui-standalone-preset.js" was not modified
2018-05-22 14:26:02.094 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 0.33ms 304 application/javascript
2018-05-22 14:26:02.616 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/swagger/v1/swagger.json  
2018-05-22 14:26:02.616 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 14:26:02.616 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 14:26:02.620 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 4.1778ms 200 application/json
2018-05-22 14:26:37.476 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/age?age=20  
2018-05-22 14:26:37.488 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 14:26:37.488 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 14:26:37.511 -03:00 [INFO] Tnf.Localization.Internal.LocalizationManager Initializing 2 localization sources.
2018-05-22 14:26:37.571 -03:00 [INFO] Tnf.Localization.Internal.LocalizationManager Initialized localization source: Indexing
2018-05-22 14:26:37.571 -03:00 [INFO] Tnf.Localization.Internal.LocalizationManager Initialized localization source: Tnf
2018-05-22 14:26:37.629 -03:00 [DBUG] Tnf.AspNetCore.Mvc.Authorization.TnfAuthorizationFilter Check if method System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SearchForAge(Int32) requires authorization
2018-05-22 14:26:37.629 -03:00 [DBUG] Tnf.AspNetCore.Mvc.Authorization.TnfAuthorizationFilter Not required
2018-05-22 14:26:37.646 -03:00 [INFO] Nest.ElasticClient Registering elastic client
2018-05-22 14:26:37.647 -03:00 [INFO] Nest.ElasticClient Found 1 profiles
2018-05-22 14:26:37.648 -03:00 [INFO] Nest.ElasticClient Mapping type Indexing.Domain.Entities.Employee with index name indexing_sample_employee and type name Employee
2018-05-22 14:26:38.018 -03:00 [DBUG] Nest.ElasticClient Elastic.DebugInformation: Valid NEST response built from a successful low level call on HEAD: /indexing_sample_employee
# Audit trail of this API call:
 - [1] HealthyResponse: Node: http://localhost:9200/ Took: 00:00:00.2764472
# Request:
<Request stream not captured or already read to completion by serializer. Set DisableDirectStreaming() on ConnectionSettings to force it to be set on the response.>
# Response:
<Response stream not captured or already read to completion by serializer. Set DisableDirectStreaming() on ConnectionSettings to force it to be set on the response.>

2018-05-22 14:26:38.018 -03:00 [INFO] Nest.ElasticClient Elastic.IsValid: True
2018-05-22 14:26:38.079 -03:00 [INFO] Nest.ElasticClient Analyzer configured with name [tnf_analizer] tokenizer [standard] and filters [asciifolding,lowercase]
2018-05-22 14:26:38.079 -03:00 [INFO] Nest.ElasticClient Try create index for indexing_sample_employee.
2018-05-22 14:26:38.590 -03:00 [DBUG] Nest.ElasticClient Elastic.DebugInformation: Valid NEST response built from a successful low level call on PUT: /indexing_sample_employee
# Audit trail of this API call:
 - [1] HealthyResponse: Node: http://localhost:9200/ Took: 00:00:00.5053931
# Request:
<Request stream not captured or already read to completion by serializer. Set DisableDirectStreaming() on ConnectionSettings to force it to be set on the response.>
# Response:
<Response stream not captured or already read to completion by serializer. Set DisableDirectStreaming() on ConnectionSettings to force it to be set on the response.>

2018-05-22 14:26:38.590 -03:00 [INFO] Nest.ElasticClient Elastic.IsValid: True
2018-05-22 14:26:38.590 -03:00 [INFO] Nest.ElasticClient Index for indexing_sample_employee is created.
2018-05-22 14:26:38.694 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executing action method "Indexing.Web.Controllers.EmployeeController.SearchForAge (Indexing.Web)" with arguments (["20"]) - ModelState is Valid
2018-05-22 14:26:46.465 -03:00 [DBUG] Tnf.Elasticsearch.IndexingProvider Elastic.DebugInformation: Valid NEST response built from a successful low level call on POST: /indexing_sample_employee/Employee/_search?typed_keys=true
# Audit trail of this API call:
 - [1] HealthyResponse: Node: http://localhost:9200/ Took: 00:00:00.4036700
# Request:
<Request stream not captured or already read to completion by serializer. Set DisableDirectStreaming() on ConnectionSettings to force it to be set on the response.>
# Response:
<Response stream not captured or already read to completion by serializer. Set DisableDirectStreaming() on ConnectionSettings to force it to be set on the response.>

2018-05-22 14:26:46.465 -03:00 [INFO] Tnf.Elasticsearch.IndexingProvider Elastic.IsValid: True
2018-05-22 14:26:49.711 -03:00 [INFO] Microsoft.AspNetCore.Mvc.StatusCodeResult Executing HttpStatusCodeResult, setting HTTP status code 200
2018-05-22 14:26:49.715 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executed action "Indexing.Web.Controllers.EmployeeController.SearchForAge (Indexing.Web)" in 12086.0136ms
2018-05-22 14:26:49.715 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 12239.9064ms 200 
2018-05-22 14:50:14.366 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 POST http://localhost:5055/api/employee application/json-patch+json 117
2018-05-22 14:50:14.368 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-05-22 14:50:14.368 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 14:50:14.368 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 14:50:14.381 -03:00 [DBUG] Tnf.AspNetCore.Mvc.Authorization.TnfAuthorizationFilter Check if method System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(Indexing.Domain.Entities.Employee) requires authorization
2018-05-22 14:50:14.381 -03:00 [DBUG] Tnf.AspNetCore.Mvc.Authorization.TnfAuthorizationFilter Not required
2018-05-22 14:50:14.472 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executing action method "Indexing.Web.Controllers.EmployeeController.Post (Indexing.Web)" with arguments (["Indexing.Domain.Entities.Employee"]) - ModelState is Valid
2018-05-22 14:50:47.845 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SampleContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "SensitiveDataLoggingEnabled "
2018-05-22 14:50:47.948 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-22 14:50:48.007 -03:00 [EROR] Microsoft.EntityFrameworkCore.Update An exception occurred in the database while saving changes for context type '"Indexing.Infra.SqLite.Context.SampleContext"'."
""System.InvalidOperationException: The entity of 'Employee' is sharing the table 'Employees' with 'Employee.Address#Address', but there is no entity of this type with the same key value 'EmployeeId:561dc301-c090-48a8-89ba-da9ec1e22817' that has been marked as 'Added'.
   at Microsoft.EntityFrameworkCore.Update.Internal.ModificationCommandIdentityMap.Validate(Boolean sensitiveLoggingEnabled)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.CreateModificationCommands(IReadOnlyList`1 entries, Func`1 generateParameterName)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.<BatchCommands>d__8.MoveNext()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.<ExecuteAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__61.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__59.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.DbContext.<SaveChangesAsync>d__48.MoveNext()"
System.InvalidOperationException: The entity of 'Employee' is sharing the table 'Employees' with 'Employee.Address#Address', but there is no entity of this type with the same key value 'EmployeeId:561dc301-c090-48a8-89ba-da9ec1e22817' that has been marked as 'Added'.
   at Microsoft.EntityFrameworkCore.Update.Internal.ModificationCommandIdentityMap.Validate(Boolean sensitiveLoggingEnabled)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.CreateModificationCommands(IReadOnlyList`1 entries, Func`1 generateParameterName)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.<BatchCommands>d__8.MoveNext()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.<ExecuteAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__61.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__59.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.DbContext.<SaveChangesAsync>d__48.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at Tnf.EntityFrameworkCore.TnfDbContext.<SaveChangesAsync>d__36.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Tnf.EntityFrameworkCore.Repositories.EfCoreRepositoryBase`2.<InsertAsync>d__29.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Tnf.EntityFrameworkCore.Repositories.EfCoreRepositoryBase`2.<InsertAndSaveChangesAsync>d__35.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Indexing.Application.Services.EmployeeAppService.<CreateAsync>d__2.MoveNext() in D:\git\tnf-samples\Scenarios\Indexing\src\Indexing.Application\Services\EmployeeAppService.cs:line 26
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Indexing.Web.Controllers.EmployeeController.<Post>d__6.MoveNext() in D:\git\tnf-samples\Scenarios\Indexing\src\Indexing.Web\Controllers\EmployeeController.cs:line 83
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeActionMethodAsync>d__12.MoveNext()
2018-05-22 14:50:48.008 -03:00 [EROR] Tnf.EntityFrameworkCore.TnfDbContext The entity of 'Employee' is sharing the table 'Employees' with 'Employee.Address#Address', but there is no entity of this type with the same key value 'EmployeeId:561dc301-c090-48a8-89ba-da9ec1e22817' that has been marked as 'Added'.
System.InvalidOperationException: The entity of 'Employee' is sharing the table 'Employees' with 'Employee.Address#Address', but there is no entity of this type with the same key value 'EmployeeId:561dc301-c090-48a8-89ba-da9ec1e22817' that has been marked as 'Added'.
   at Microsoft.EntityFrameworkCore.Update.Internal.ModificationCommandIdentityMap.Validate(Boolean sensitiveLoggingEnabled)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.CreateModificationCommands(IReadOnlyList`1 entries, Func`1 generateParameterName)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.<BatchCommands>d__8.MoveNext()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.<ExecuteAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__61.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__59.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.DbContext.<SaveChangesAsync>d__48.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at Tnf.EntityFrameworkCore.TnfDbContext.<SaveChangesAsync>d__36.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Tnf.EntityFrameworkCore.Repositories.EfCoreRepositoryBase`2.<InsertAsync>d__29.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Tnf.EntityFrameworkCore.Repositories.EfCoreRepositoryBase`2.<InsertAndSaveChangesAsync>d__35.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Indexing.Application.Services.EmployeeAppService.<CreateAsync>d__2.MoveNext() in D:\git\tnf-samples\Scenarios\Indexing\src\Indexing.Application\Services\EmployeeAppService.cs:line 26
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Indexing.Web.Controllers.EmployeeController.<Post>d__6.MoveNext() in D:\git\tnf-samples\Scenarios\Indexing\src\Indexing.Web\Controllers\EmployeeController.cs:line 83
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeActionMethodAsync>d__12.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeNextActionFilterAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeInnerFilterAsync>d__14.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeNextExceptionFilterAsync>d__23.MoveNext()
2018-05-22 14:50:49.812 -03:00 [EROR] Tnf.AspNetCore.Mvc.Exception.TnfExceptionActionFilter The entity of 'Employee' is sharing the table 'Employees' with 'Employee.Address#Address', but there is no entity of this type with the same key value 'EmployeeId:561dc301-c090-48a8-89ba-da9ec1e22817' that has been marked as 'Added'.
System.InvalidOperationException: The entity of 'Employee' is sharing the table 'Employees' with 'Employee.Address#Address', but there is no entity of this type with the same key value 'EmployeeId:561dc301-c090-48a8-89ba-da9ec1e22817' that has been marked as 'Added'.
   at Microsoft.EntityFrameworkCore.Update.Internal.ModificationCommandIdentityMap.Validate(Boolean sensitiveLoggingEnabled)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.CreateModificationCommands(IReadOnlyList`1 entries, Func`1 generateParameterName)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.<BatchCommands>d__8.MoveNext()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.<ExecuteAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__61.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__59.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.DbContext.<SaveChangesAsync>d__48.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at Tnf.EntityFrameworkCore.TnfDbContext.<SaveChangesAsync>d__36.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Tnf.EntityFrameworkCore.Repositories.EfCoreRepositoryBase`2.<InsertAsync>d__29.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task tas2018-05-22 14:52:46.819 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SampleContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "SensitiveDataLoggingEnabled "
2018-05-22 14:52:46.951 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("19"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-22 14:52:46.953 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-22 14:52:46.955 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*) FROM \"sqlite_master\" WHERE \"name\" = '__EFMigrationsHistory' AND \"type\" = 'table';"
2018-05-22 14:52:46.956 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-22 14:52:46.956 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-22 14:52:46.957 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*) FROM \"sqlite_master\" WHERE \"name\" = '__EFMigrationsHistory' AND \"type\" = 'table';"
2018-05-22 14:52:46.965 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-22 14:52:46.966 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"MigrationId\", \"ProductVersion\"
FROM \"__EFMigrationsHistory\"
ORDER BY \"MigrationId\";"
2018-05-22 14:52:46.971 -03:00 [INFO] Microsoft.EntityFrameworkCore.Migrations Applying migration '"20180522175228_CreateDatabase"'.
2018-05-22 14:52:47.008 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-22 14:52:47.010 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE TABLE \"Employees\" (
    \"EmployeeId\" BLOB NOT NULL CONSTRAINT \"PK_Employees\" PRIMARY KEY,
    \"Age\" INTEGER NOT NULL,
    \"DateOfBirth\" TEXT NOT NULL,
    \"Name\" TEXT NOT NULL,
    \"Salary\" REAL NOT NULL,
    \"Score\" TEXT NOT NULL,
    \"Street\" TEXT NULL,
    \"ZipCode\" TEXT NULL
);"
2018-05-22 14:52:47.011 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""INSERT INTO \"__EFMigrationsHistory\" (\"MigrationId\", \"ProductVersion\")
VALUES ('20180522175228_CreateDatabase', '2.0.3-rtm-10026');"
2018-05-22 14:52:48.272 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/  
2018-05-22 14:52:48.290 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 14:52:48.298 -03:00 [INFO] Tnf.Settings.Internal.SettingDefinitionManager Settings definitions loaded: [Tnf.Localization.DefaultLanguageName,Tnf.Timing.TimeZone]
2018-05-22 14:52:48.304 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 14:52:48.369 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 102.856ms 302 
2018-05-22 14:52:48.396 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/swagger  
2018-05-22 14:52:48.397 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 14:52:48.398 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 14:52:48.404 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 7.7618ms 301 
2018-05-22 14:52:48.408 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/swagger/  
2018-05-22 14:52:48.408 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 14:52:48.409 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 14:52:48.430 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 21.5837ms 200 text/html
2018-05-22 14:52:48.438 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/swagger/swagger-ui-bundle.js  
2018-05-22 14:52:48.438 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 14:52:48.438 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 14:52:48.438 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/swagger/swagger-ui-standalone-preset.js  
2018-05-22 14:52:48.438 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 14:52:48.438 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 14:52:48.444 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/swagger/swagger-ui.css  
2018-05-22 14:52:48.444 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 14:52:48.444 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 14:52:48.447 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware The file "/swagger-ui-standalone-preset.js" was not modified
2018-05-22 14:52:48.447 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware The file "/swagger-ui.css" was not modified
2018-05-22 14:52:48.447 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware The file "/swagger-ui-bundle.js" was not modified
2018-05-22 14:52:48.449 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 10.7555ms 304 application/javascript
2018-05-22 14:52:48.449 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 10.6233ms 304 application/javascript
2018-05-22 14:52:48.449 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 5.5558ms 304 text/css
2018-05-22 14:52:48.782 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/swagger/v1/swagger.json  
2018-05-22 14:52:48.782 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 14:52:48.782 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 14:52:49.012 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 230.8892ms 200 application/json
2018-05-22 14:54:05.274 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 POST http://localhost:5055/api/employee application/json-patch+json 121
2018-05-22 14:54:05.278 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-05-22 14:54:05.279 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 14:54:05.279 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 14:54:05.308 -03:00 [INFO] Tnf.Localization.Internal.LocalizationManager Initializing 2 localization sources.
2018-05-22 14:54:05.371 -03:00 [INFO] Tnf.Localization.Internal.LocalizationManager Initialized localization source: Indexing
2018-05-22 14:54:05.371 -03:00 [INFO] Tnf.Localization.Internal.LocalizationManager Initialized localization source: Tnf
2018-05-22 14:54:05.417 -03:00 [DBUG] Tnf.AspNetCore.Mvc.Authorization.TnfAuthorizationFilter Check if method System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(Indexing.Domain.Entities.Employee) requires authorization
2018-05-22 14:54:05.418 -03:00 [DBUG] Tnf.AspNetCore.Mvc.Authorization.TnfAuthorizationFilter Not required
2018-05-22 14:54:05.427 -03:00 [INFO] Nest.ElasticClient Registering elastic client
2018-05-22 14:54:05.428 -03:00 [INFO] Nest.ElasticClient Found 1 profiles
2018-05-22 14:54:05.429 -03:00 [INFO] Nest.ElasticClient Mapping type Indexing.Domain.Entities.Employee with index name indexing_sample_employee and type name Employee
2018-05-22 14:54:05.760 -03:00 [DBUG] Nest.ElasticClient Elastic.DebugInformation: Valid NEST response built from a successful low level call on HEAD: /indexing_sample_employee
# Audit trail of this API call:
 - [1] HealthyResponse: Node: http://localhost:9200/ Took: 00:00:00.2468348
# Request:
<Request stream not captured or already read to completion by serializer. Set DisableDirectStreaming() on ConnectionSettings to force it to be set on the response.>
# Response:
<Response stream not captured or already read to completion by serializer. Set DisableDirectStreaming() on ConnectionSettings to force it to be set on the response.>

2018-05-22 14:54:05.760 -03:00 [INFO] Nest.ElasticClient Elastic.IsValid: True
2018-05-22 14:54:05.761 -03:00 [INFO] Nest.ElasticClient Index for indexing_sample_employee already exist.
2018-05-22 14:54:05.875 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executing action method "Indexing.Web.Controllers.EmployeeController.Post (Indexing.Web)" with arguments (["Indexing.Domain.Entities.Employee"]) - ModelState is Valid
2018-05-22 14:55:55.509 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SampleContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "SensitiveDataLoggingEnabled "
2018-05-22 14:55:55.605 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-22 14:55:55.656 -03:00 [EROR] Microsoft.EntityFrameworkCore.Update An exception occurred in the database while saving changes for context type '"Indexing.Infra.SqLite.Context.SampleContext"'."
""System.InvalidOperationException: The entity of 'Employee' is sharing the table 'Employees' with 'Employee.Address#Address', but there is no entity of this type with the same key value 'EmployeeId:aa9532ae-f56f-4cde-9a89-de3a65f81fd6' that has been marked as 'Added'.
   at Microsoft.EntityFrameworkCore.Update.Internal.ModificationCommandIdentityMap.Validate(Boolean sensitiveLoggingEnabled)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.CreateModificationCommands(IReadOnlyList`1 entries, Func`1 generateParameterName)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.<BatchCommands>d__8.MoveNext()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.<ExecuteAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__61.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__59.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.DbContext.<SaveChangesAsync>d__48.MoveNext()"
System.InvalidOperationException: The entity of 'Employee' is sharing the table 'Employees' with 'Employee.Address#Address', but there is no entity of this type with the same key value 'EmployeeId:aa9532ae-f56f-4cde-9a89-de3a65f81fd6' that has been marked as 'Added'.
   at Microsoft.EntityFrameworkCore.Update.Internal.ModificationCommandIdentityMap.Validate(Boolean sensitiveLoggingEnabled)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.CreateModificationCommands(IReadOnlyList`1 entries, Func`1 generateParameterName)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.<BatchCommands>d__8.MoveNext()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.<ExecuteAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__61.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__59.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.DbContext.<SaveChangesAsync>d__48.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at Tnf.EntityFrameworkCore.TnfDbContext.<SaveChangesAsync>d__36.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Tnf.EntityFrameworkCore.Repositories.EfCoreRepositoryBase`2.<InsertAsync>d__29.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Tnf.EntityFrameworkCore.Repositories.EfCoreRepositoryBase`2.<InsertAndSaveChangesAsync>d__35.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Indexing.Application.Services.EmployeeAppService.<CreateAsync>d__2.MoveNext() in D:\git\tnf-samples\Scenarios\Indexing\src\Indexing.Application\Services\EmployeeAppService.cs:line 26
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Indexing.Web.Controllers.EmployeeController.<Post>d__6.MoveNext() in D:\git\tnf-samples\Scenarios\Indexing\src\Indexing.Web\Controllers\EmployeeController.cs:line 83
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeActionMethodAsync>d__12.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeNextActionFilterAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeInnerFilterAsync>d__14.MoveNext()
2018-05-22 14:55:55.658 -03:00 [EROR] Tnf.EntityFrameworkCore.TnfDbContext The entity of 'Employee' is sharing the table 'Employees' with 'Employee.Address#Address', but there is no entity of this type with the same key value 'EmployeeId:aa9532ae-f56f-4cde-9a89-de3a65f81fd6' that has been marked as 'Added'.
System.InvalidOperationException: The entity of 'Employee' is sharing the table 'Employees' with 'Employee.Address#Address', but there is no entity of this type with the same key value 'EmployeeId:aa9532ae-f56f-4cde-9a89-de3a65f81fd6' that has been marked as 'Added'.
   at Microsoft.EntityFrameworkCore.Update.Internal.ModificationCommandIdentityMap.Validate(Boolean sensitiveLoggingEnabled)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.CreateModificationCommands(IReadOnlyList`1 entries, Func`1 generateParameterName)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.<BatchCommands>d__8.MoveNext()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.<ExecuteAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__61.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__59.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.DbContext.<SaveChangesAsync>d__48.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at Tnf.EntityFrameworkCore.TnfDbContext.<SaveChangesAsync>d__36.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Tnf.EntityFrameworkCore.Repositories.EfCoreRepositoryBase`2.<InsertAsync>d__29.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Tnf.EntityFrameworkCore.Repositories.EfCoreRepositoryBase`2.<InsertAndSaveChangesAsync>d__35.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Indexing.Application.Services.EmployeeAppService.<CreateAsync>d__2.MoveNext() in D:\git\tnf-samples\Scenarios\Indexing\src\Indexing.Application\Services\EmployeeAppService.cs:line 26
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Indexing.Web.Controllers.EmployeeController.<Post>d__6.MoveNext() in D:\git\tnf-samples\Scenarios\Indexing\src\Indexing.Web\Controllers\EmployeeController.cs:line 83
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeActionMethodAsync>d__12.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeNextActionFilterAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeInnerFilterAsync>d__14.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeNextExceptionFilterAsync>d__23.MoveNext()
2018-05-22 14:55:55.863 -03:00 [EROR] Tnf.AspNetCore.Mvc.Exception.TnfExceptionActionFilter The entity of 'Employee' is sharing the table 'Employees' with 'Employee.Address#Address', but there is no entity of this type with the same key value 'EmployeeId:aa9532ae-f56f-4cde-9a89-de3a65f81fd6' that has been marked as 'Added'.
System.InvalidOperationException: The entity of 'Employee' is sharing the table 'Employees' with 'Employee.Address#Address', but there is no entity of this type with the same key value 'EmployeeId:aa9532ae-f56f-4cde-9a89-de3a65f81fd6' that has been marked as 'Added'.
   at Microsoft.EntityFrameworkCore.Update.Internal.ModificationCommandIdentityMap.Validate(Boolean sensitiveLoggingEnabled)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.CreateModificationCommands(IReadOnlyList`1 entries, Func`1 generateParameterName)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.<BatchCommands>d__8.MoveNext()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.<ExecuteAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__61.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__59.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.DbContext.<SaveChangesAsync>d__48.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at Tnf.EntityFrameworkCore.TnfDbContext.<SaveChangesAsync>d__36.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Tnf.EntityFrameworkCore.Repositories.EfCoreRepositoryBase`2.<InsertAsync>d__29.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Tnf.EntityFrameworkCore.Repositories.EfCoreRepositoryBase`2.<InsertAndSaveChangesAsync>d__35.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Indexing.Application.Services.EmployeeAppService.<CreateAsync>d__2.2018-05-22 14:58:10.623 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SampleContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "SensitiveDataLoggingEnabled "
2018-05-22 14:58:10.731 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("26"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-22 14:58:10.733 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-22 14:58:10.735 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*) FROM \"sqlite_master\" WHERE \"name\" = '__EFMigrationsHistory' AND \"type\" = 'table';"
2018-05-22 14:58:10.735 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-22 14:58:10.736 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-22 14:58:10.736 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*) FROM \"sqlite_master\" WHERE \"name\" = '__EFMigrationsHistory' AND \"type\" = 'table';"
2018-05-22 14:58:10.739 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-22 14:58:10.740 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"MigrationId\", \"ProductVersion\"
FROM \"__EFMigrationsHistory\"
ORDER BY \"MigrationId\";"
2018-05-22 14:58:10.756 -03:00 [INFO] Microsoft.EntityFrameworkCore.Migrations No migrations were applied. The database is already up to date.
2018-05-22 14:58:11.707 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/  
2018-05-22 14:58:11.727 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 14:58:11.736 -03:00 [INFO] Tnf.Settings.Internal.SettingDefinitionManager Settings definitions loaded: [Tnf.Localization.DefaultLanguageName,Tnf.Timing.TimeZone]
2018-05-22 14:58:11.743 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 14:58:11.812 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 110.2634ms 302 
2018-05-22 14:58:11.861 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/swagger  
2018-05-22 14:58:11.861 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 14:58:11.862 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 14:58:11.863 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1.8593ms 301 
2018-05-22 14:58:11.869 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/swagger/  
2018-05-22 14:58:11.869 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 14:58:11.869 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 14:58:11.895 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 25.8666ms 200 text/html
2018-05-22 14:58:11.903 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/swagger/swagger-ui.css  
2018-05-22 14:58:11.903 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 14:58:11.903 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 14:58:11.908 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/swagger/swagger-ui-standalone-preset.js  
2018-05-22 14:58:11.908 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 14:58:11.908 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 14:58:11.909 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/swagger/swagger-ui-bundle.js  
2018-05-22 14:58:11.909 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 14:58:11.909 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 14:58:11.924 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware The file "/swagger-ui-bundle.js" was not modified
2018-05-22 14:58:11.924 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware The file "/swagger-ui-standalone-preset.js" was not modified
2018-05-22 14:58:11.924 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware The file "/swagger-ui.css" was not modified
2018-05-22 14:58:11.925 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 22.102ms 304 text/css
2018-05-22 14:58:11.925 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 16.0451ms 304 application/javascript
2018-05-22 14:58:11.925 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 17.0857ms 304 application/javascript
2018-05-22 14:58:12.256 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/swagger/v1/swagger.json  
2018-05-22 14:58:12.256 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 14:58:12.256 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 14:58:12.482 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 226.4974ms 200 application/json
2018-05-22 14:58:22.849 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 POST http://localhost:5055/api/employee application/json-patch+json 203
2018-05-22 14:58:22.851 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-05-22 14:58:22.852 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 14:58:22.854 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 14:58:22.898 -03:00 [INFO] Tnf.Localization.Internal.LocalizationManager Initializing 2 localization sources.
2018-05-22 14:58:22.968 -03:00 [INFO] Tnf.Localization.Internal.LocalizationManager Initialized localization source: Indexing
2018-05-22 14:58:22.968 -03:00 [INFO] Tnf.Localization.Internal.LocalizationManager Initialized localization source: Tnf
2018-05-22 14:58:23.009 -03:00 [DBUG] Tnf.AspNetCore.Mvc.Authorization.TnfAuthorizationFilter Check if method System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(Indexing.Domain.Entities.Employee) requires authorization
2018-05-22 14:58:23.010 -03:00 [DBUG] Tnf.AspNetCore.Mvc.Authorization.TnfAuthorizationFilter Not required
2018-05-22 14:58:23.019 -03:00 [INFO] Nest.ElasticClient Registering elastic client
2018-05-22 14:58:23.020 -03:00 [INFO] Nest2018-05-22 14:59:25.392 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SampleContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "SensitiveDataLoggingEnabled "
2018-05-22 14:59:25.511 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("35"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-22 14:59:25.513 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-22 14:59:25.515 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*) FROM \"sqlite_master\" WHERE \"name\" = '__EFMigrationsHistory' AND \"type\" = 'table';"
2018-05-22 14:59:25.516 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-22 14:59:25.517 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-22 14:59:25.520 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*) FROM \"sqlite_master\" WHERE \"name\" = '__EFMigrationsHistory' AND \"type\" = 'table';"
2018-05-22 14:59:25.523 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-22 14:59:25.524 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"MigrationId\", \"ProductVersion\"
FROM \"__EFMigrationsHistory\"
ORDER BY \"MigrationId\";"
2018-05-22 14:59:25.531 -03:00 [INFO] Microsoft.EntityFrameworkCore.Migrations No migrations were applied. The database is already up to date.
2018-05-22 14:59:26.730 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/  
2018-05-22 14:59:26.759 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 14:59:26.766 -03:00 [INFO] Tnf.Settings.Internal.SettingDefinitionManager Settings definitions loaded: [Tnf.Localization.DefaultLanguageName,Tnf.Timing.TimeZone]
2018-05-22 14:59:26.773 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 14:59:26.843 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 121.0161ms 302 
2018-05-22 14:59:26.872 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/swagger  
2018-05-22 14:59:26.872 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 14:59:26.873 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 14:59:26.873 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1.3244ms 301 
2018-05-22 14:59:26.878 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/swagger/  
2018-05-22 14:59:26.879 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 14:59:26.880 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 14:59:26.901 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 22.4804ms 200 text/html
2018-05-22 14:59:26.909 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/swagger/swagger-ui.css  
2018-05-22 14:59:26.909 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 14:59:26.909 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 14:59:26.909 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/swagger/swagger-ui-standalone-preset.js  
2018-05-22 14:59:26.909 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/swagger/swagger-ui-bundle.js  
2018-05-22 14:59:26.909 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 14:59:26.909 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 14:59:26.909 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 14:59:26.909 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 14:59:26.918 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware The file "/swagger-ui-standalone-preset.js" was not modified
2018-05-22 14:59:26.918 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware The file "/swagger-ui.css" was not modified
2018-05-22 14:59:26.919 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware The file "/swagger-ui-bundle.js" was not modified
2018-05-22 14:59:26.920 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 10.85ms 304 application/javascript
2018-05-22 14:59:26.920 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 11.295ms 304 text/css
2018-05-22 14:59:26.922 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 10.8489ms 304 application/javascript
2018-05-22 14:59:27.247 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/swagger/v1/swagger.json  
2018-05-22 14:59:27.247 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 14:59:27.247 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 14:59:27.477 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 230.4883ms 200 application/json
2018-05-22 14:59:28.053 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 POST http://localhost:5055/api/employee application/json-patch+json 203
2018-05-22 14:59:28.054 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-05-22 14:59:28.055 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 14:59:28.055 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 14:59:28.080 -03:00 [INFO] Tnf.Localization.Internal.LocalizationManager Initializing 2 localization sources.
2018-05-22 14:59:28.159 -03:00 [INFO] Tnf.Localization.Internal.LocalizationManager Initialized localization source: Indexing
2018-05-22 14:59:28.159 -03:00 [INFO] Tnf.Localization.Internal.LocalizationManager Initialized localization source: Tnf
2018-05-22 14:59:28.203 -03:00 [DBUG] Tnf.AspNetCore.Mvc.Authorization.TnfAuthorizationFilter Check if method System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(Indexing.Domain.Entities.Employee) requires authorization
2018-05-22 14:59:28.204 -03:00 [DBUG] Tnf.AspNetCore.Mvc.Authorization.TnfAuthorizationFilter Not required
2018-05-22 14:59:28.213 -03:00 [INFO] Nest.ElasticClient Registering elastic client
2018-05-22 14:59:28.213 -03:00 [INFO] Nest.ElasticClient Found 1 profiles
2018-05-22 14:59:28.214 -03:00 [INFO] Nest.ElasticClient Mapping type Indexing.Domain.Entities.Employee with index name indexing_sample_employee and type name Employee
2018-05-22 14:59:28.547 -03:00 [DBUG] Nest.ElasticClient Elastic.DebugInformation: Valid NEST response built from a successful low level call on HEAD: /indexing_sample_employee
# Audit trail of this API call:
 - [1] HealthyResponse: Node: http://localhost:9200/ Took: 00:00:00.2463783
# Request:
<Request stream not captured or already read to completion by serializer. Set DisableDirectStreaming() on ConnectionSettings to force it to be set on the response.>
# Response:
<Response stream not captured or already read to completion by serializer. Set DisableDirectStreaming() on ConnectionSettings to force it to be set on the response.>

2018-05-22 14:59:28.547 -03:00 [INFO] Nest.ElasticClient Elastic.IsValid: True
2018-05-22 14:59:28.548 -03:00 [INFO] Nest.ElasticClient Index for indexing_sample_employee already exist.
2018-05-22 14:59:28.671 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executing action method "Indexing.Web.Controllers.EmployeeController.Post (Indexing.Web)" with arguments ([""]) - ModelState is Invalid
2018-05-22 14:59:36.068 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ObjectResultExecutor Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2018-05-22 14:59:36.074 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executed action "Indexing.Web.Controllers.EmployeeController.Post (Indexing.Web)" in 7870.748ms
2018-05-22 14:59:36.078 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 8024.6525ms 400 text/plain; charset=utf-8
2018-05-22 15:04:06.519 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 POST http://localhost:5055/api/employee application/json-patch+json 134
2018-05-22 15:04:06.519 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-05-22 15:04:06.520 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 15:04:06.520 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 15:04:06.523 -03:00 [DBUG] Tnf.AspNetCore.Mvc.Authorization.TnfAuthorizationFilter Check if method System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(Indexing.Domain.Entities.Employee) requires authorization
2018-05-22 15:04:06.524 -03:00 [DBUG] Tnf.AspNetCore.Mvc.Authorization.TnfAuthorizationFilter Not required
2018-05-22 15:04:06.638 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executing action method "Indexing.Web.Controllers.EmployeeController.Post (Indexing.Web)" with arguments ([""]) - ModelState is Invalid
2018-05-22 15:06:24.395 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ObjectResultExecutor Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2018-05-22 15:06:24.395 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executed action "Indexing.Web.Controllers.EmployeeController.Post (Indexing.Web)" in 137871.5488ms
2018-05-22 15:06:24.396 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 137876.7785ms 400 text/plain; charset=utf-8
2018-05-22 15:06:53.077 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 POST http://localhost:5055/api/employee application/json-patch+json 152
2018-05-22 15:06:53.077 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-05-22 15:06:53.078 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 15:06:53.078 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 15:06:53.079 -03:00 [DBUG] Tnf.AspNetCore.2018-05-22 15:30:06.093 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SampleContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "SensitiveDataLoggingEnabled "
2018-05-22 15:30:06.271 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("20"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-22 15:30:06.320 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-22 15:30:06.328 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE TABLE \"__EFMigrationsHistory\" (
    \"MigrationId\" TEXT NOT NULL CONSTRAINT \"PK___EFMigrationsHistory\" PRIMARY KEY,
    \"ProductVersion\" TEXT NOT NULL
);"
2018-05-22 15:30:06.334 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-22 15:30:06.335 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-22 15:30:06.336 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*) FROM \"sqlite_master\" WHERE \"name\" = '__EFMigrationsHistory' AND \"type\" = 'table';"
2018-05-22 15:30:06.337 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-22 15:30:06.338 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"MigrationId\", \"ProductVersion\"
FROM \"__EFMigrationsHistory\"
ORDER BY \"MigrationId\";"
2018-05-22 15:30:06.343 -03:00 [INFO] Microsoft.EntityFrameworkCore.Migrations Applying migration '"20180522182837_CreateDatabase"'.
2018-05-22 15:30:06.361 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-22 15:30:06.363 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE TABLE \"Employees\" (
    \"EmployeeId\" BLOB NOT NULL CONSTRAINT \"PK_Employees\" PRIMARY KEY,
    \"Age\" INTEGER NULL,
    \"DateOfBirth\" TEXT NULL,
    \"Name\" TEXT NOT NULL,
    \"Salary\" REAL NULL,
    \"Score\" TEXT NULL,
    \"Street\" TEXT NULL,
    \"ZipCode\" TEXT NULL
);"
2018-05-22 15:30:06.364 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""INSERT INTO \"__EFMigrationsHistory\" (\"MigrationId\", \"ProductVersion\")
VALUES ('20180522182837_CreateDatabase', '2.0.3-rtm-10026');"
2018-05-22 15:30:07.873 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/  
2018-05-22 15:30:07.891 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 15:30:07.902 -03:00 [INFO] Tnf.Settings.Internal.SettingDefinitionManager Settings definitions loaded: [Tnf.Localization.DefaultLanguageName,Tnf.Timing.TimeZone]
2018-05-22 15:30:07.909 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 15:30:07.978 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 109.482ms 302 
2018-05-22 15:30:08.009 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/swagger  
2018-05-22 15:30:08.009 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 15:30:08.010 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 15:30:08.019 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 10.0418ms 301 
2018-05-22 15:30:08.027 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/swagger/  
2018-05-22 15:30:08.027 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 15:30:08.027 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 15:30:08.052 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 25.6733ms 200 text/html
2018-05-22 15:30:08.062 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/swagger/swagger-ui.css  
2018-05-22 15:30:08.062 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 15:30:08.062 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 15:30:08.072 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware The file "/swagger-ui.css" was not modified
2018-05-22 15:30:08.074 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/swagger/swagger-ui-bundle.js  
2018-05-22 15:30:08.074 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/swagger/swagger-ui-standalone-preset.js  
2018-05-22 15:30:08.074 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 15:30:08.074 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 15:30:08.074 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 15:30:08.074 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 15:30:08.074 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 12.3179ms 304 text/css
2018-05-22 15:30:08.074 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware The file "/swagger-ui-bundle.js" was not modified
2018-05-22 15:30:08.076 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 2.1516ms 304 application/javascript
2018-05-22 15:30:08.077 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware The file "/swagger-ui-standalone-preset.js" was not modified
2018-05-22 15:30:08.077 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 3.3671ms 304 application/javascript
2018-05-22 15:30:08.428 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/swagger/v1/swagger.json  
2018-05-22 15:30:08.428 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 15:30:08.428 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 15:30:08.679 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 251.3492ms 200 application/json
2018-05-22 15:30:13.571 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/swagger/  
2018-05-22 15:30:13.571 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 15:30:13.571 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 15:30:13.571 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 0.8089ms 200 text/html
2018-05-22 15:30:13.589 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/swagger/swagger-ui.css  
2018-05-22 15:30:13.589 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 15:30:13.589 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 15:30:13.589 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware The file "/swagger-ui.css" was not modified
2018-05-22 15:30:13.589 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 0.3854ms 304 text/css
2018-05-22 15:30:13.591 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/swagger/swagger-ui-bundle.js  
2018-05-22 15:30:13.591 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 15:30:13.592 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 15:30:13.592 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware The file "/swagger-ui-bundle.js" was not modified
2018-05-22 15:30:13.592 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 1.1488ms 304 application/javascript
2018-05-22 15:30:13.616 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/swagger/swagger-ui-standalone-preset.js  
2018-05-22 15:30:13.616 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 15:30:13.616 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 15:30:13.617 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware The file "/swagger-ui-standalone-preset.js" was not modified
2018-05-22 15:30:13.617 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 2.2627ms 304 application/javascript
2018-05-22 15:30:14.250 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/swagger/v1/swagger.json  
2018-05-22 15:30:14.250 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 15:30:14.250 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 15:30:14.254 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 4.2113ms 200 application/json
2018-05-22 15:30:14.378 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/swagger/favicon-32x32.png  
2018-05-22 15:30:14.378 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 15:30:14.378 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 15:30:14.391 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '"/favicon-32x32.png"'. Physical path: '"N/A"'
2018-05-22 15:30:14.401 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 16.6065ms 200 image/png
2018-05-22 15:30:14.412 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/swagger/favicon-16x16.png  
2018-05-22 15:30:14.412 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 15:30:14.413 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 15:30:14.413 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware The file "/favicon-16x16.png" was not modified
2018-05-22 15:30:14.416 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 3.4281ms 304 image/png
2018-05-22 15:31:22.663 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 POST http://localhost:5055/api/employee application/json-patch+json 26
2018-05-22 15:31:22.666 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-05-22 15:31:22.666 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 15:31:22.666 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 15:31:22.684 -03:00 [INFO] Tnf.Localization.Internal.LocalizationManager Initializing 2 localization sources.
2018-05-22 15:31:22.734 -03:00 [INFO] Tnf.Localization.Internal.LocalizationManager Initialized localization source: Indexing
2018-05-22 15:31:22.734 -03:00 [INFO] Tnf.Localization.Internal.LocalizationManager Initialized localization source: Tnf
2018-05-22 15:31:22.781 -03:00 [DBUG] Tnf.AspNetCore.Mvc.Authorization.TnfAuthorizationFilter Check if method System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(Indexing.Domain.Entities.Employee) requires authorization
2018-05-22 15:31:22.781 -03:00 [DBUG] Tnf.AspNetCore.Mvc.Authorization.TnfAuthorizationFilter Not required
2018-05-22 15:31:22.796 -03:00 [INFO] Nest.ElasticClient Registering elastic client
2018-05-22 15:31:22.797 -03:00 [INFO] Nest.ElasticClient Found 1 profiles
2018-05-22 15:31:22.798 -03:00 [INFO] Nest.ElasticClient Mapping type Indexing.Domain.Entities.Employee with index name indexing_sample_employee and type name Employee
2018-05-22 15:31:23.128 -03:00 [DBUG] Nest.ElasticClient Elastic.DebugInformation: Valid NEST response built from a successful low level call on HEAD: /indexing_sample_employee
# Audit trail of this API call:
 - [1] HealthyResponse: Node: http://localhost:9200/ Took: 00:00:00.2406386
# Request:
<Request stream not captured or already read to completion by serializer. Set DisableDirectStreaming() on ConnectionSettings to force it to be set on the response.>
# Response:
<Response stream not captured or already read to completion by serializer. Set DisableDirectStreaming() on ConnectionSettings to force it to be set on the response.>

2018-05-22 15:31:23.129 -03:00 [INFO] Nest.ElasticClient Elastic.IsValid: True
2018-05-22 15:31:23.129 -03:00 [INFO] Nest.ElasticClient Index for indexing_sample_employee already exist.
2018-05-22 15:31:23.218 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executing action method "Indexing.Web.Controllers.EmployeeController.Post (Indexing.Web)" with arguments (["Indexing.Domain.Entities.Employee"]) - ModelState is Valid
2018-05-22 15:31:31.515 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SampleContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "SensitiveDataLoggingEnabled "
2018-05-22 15:31:31.605 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-22 15:31:31.651 -03:00 [EROR] Microsoft.EntityFrameworkCore.Update An exception occurred in the database while saving changes for context type '"Indexing.Infra.SqLite.Context.SampleContext"'."
""System.InvalidOperationException: The entity of 'Employee' is sharing the table 'Employees' with 'Employee.FullAddress#Address', but there is no entity of this type with the same key value 'EmployeeId:c6bc12cb-d4ba-4e3a-94c4-d4d31365c664' that has been marked as 'Added'.
   at Microsoft.EntityFrameworkCore.Update.Internal.ModificationCommandIdentityMap.Validate(Boolean sensitiveLoggingEnabled)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.CreateModificationCommands(IReadOnlyList`1 entries, Func`1 generateParameterName)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.<BatchCommands>d__8.MoveNext()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.<ExecuteAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__61.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__59.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.DbContext.<SaveChangesAsync>d__48.MoveNext()"
System.InvalidOperationException: The entity of 'Employee' is sharing the table 'Employees' with 'Employee.FullAddress#Address', but there is no entity of this type with the same key value 'EmployeeId:c6bc12cb-d4ba-4e3a-94c4-d4d31365c664' that has been marked as 'Added'.
   at Microsoft.EntityFrameworkCore.Update.Internal.ModificationCommandIdentityMap.Validate(Boolean sensitiveLoggingEnabled)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.CreateModificationCommands(IReadOnlyList`1 entries, Func`1 generateParameterName)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.<BatchCommands>d__8.MoveNext()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.<ExecuteAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__61.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__59.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.DbContext.<SaveChangesAsync>d__48.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at Tnf.EntityFrameworkCore.TnfDbContext.<SaveChangesAsync>d__36.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Tnf.EntityFrameworkCore.Repositories.EfCoreRepositoryBase`2.<InsertAsync>d__29.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Tnf.EntityFrameworkCore.Repositories.EfCoreRepositoryBase`2.<InsertAndSaveChangesAsync>d__35.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Indexing.Application.Services.EmployeeAppService.<CreateAsync>d__2.MoveNext() in D:\git\tnf-samples\Scenarios\Indexing\src\Indexing.Application\Services\EmployeeAppService.cs:line 26
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Indexing.Web.Controllers.EmployeeController.<Post>d__6.MoveNext() in D:\git\tnf-samples\Scenarios\Indexing\src\Indexing.Web\Controllers\EmployeeController.cs:line 83
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeActionMethodAsync>d__12.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeNextActionFilterAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeInnerFilterAsync>d__14.MoveNext()
2018-05-22 15:31:31.653 -03:00 [EROR] Tnf.EntityFrameworkCore.TnfDbContext The entity of 'Employee' is sharing the table 'Employees' with 'Employee.FullAddress#Address', but there is no entity of this type with the same key value 'EmployeeId:c6bc12cb-d4ba-4e3a-94c4-d4d31365c664' that has been marked as 'Added'.
System.InvalidOperationException: The entity of 'Employee' is sharing the table 'Employees' with 'Employee.FullAddress#Address', but there is no entity of this type with the same key value 'EmployeeId:c6bc12cb-d4ba-4e3a-94c4-d4d31365c664' that has been marked as 'Added'.
   at Microsoft.EntityFrameworkCore.Update.Internal.ModificationCommandIdentityMap.Validate(Boolean sensitiveLoggingEnabled)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.CreateModificationCommands(IReadOnlyList`1 entries, Func`1 generateParameterName)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.<BatchCommands>d__8.MoveNext()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.<ExecuteAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__61.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__59.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.DbContext.<SaveChangesAsync>d__48.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at Tnf.EntityFrameworkCore.TnfDbContext.<SaveChangesAsync>d__36.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Tnf.EntityFrameworkCore.Repositories.EfCoreRepositoryBase`2.<InsertAsync>d__29.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Tnf.EntityFrameworkCore.Repositories.EfCoreRepositoryBase`2.<InsertAndSaveChangesAsync>d__35.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Indexing.Application.Services.EmployeeAppService.<CreateAsync>d__2.MoveNext() in D:\git\tnf-samples\Scenarios\Indexing\src\Indexing.Application\Services\EmployeeAppService.cs:line 26
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Indexing.Web.Controllers.EmployeeController.<Post>d__6.MoveNext() in D:\git\tnf-samples\Scenarios\Indexing\src\Indexing.Web\Controllers\EmployeeController.cs:line 83
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeActionMethodAsync>d__12.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeNextActionFilterAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeInnerFilterAsync>d__14.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeNextExceptionFilterAsync>d__23.MoveNext()
2018-05-22 15:31:31.855 -03:00 [EROR] Tnf.AspNetCore.Mvc.Exception.TnfExceptionActionFilter The entity of 'Employee' is sharing the table 'Employees' with 'Employee.FullAddress#Address', but there is no entity of this type with the same key value 'EmployeeId:c6bc12cb-d4ba-4e3a-94c4-d4d31365c664' that has been marked as 'Added'.
System.InvalidOperationException: The entity of 'Employee' is sharing the table 'Employees' with 'Employee.FullAddress#Address', but there is no entity of this type with the same key value 'EmployeeId:c6bc12cb-d4ba-4e3a-94c4-d4d31365c664' that has been marked as 'Added'.
   at Microsoft.EntityFrameworkCore.Update.Internal.ModificationCommandIdentityMap.Validate(Boolean sensitiveLoggingEnabled)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.CreateModificationCommands(IReadOnlyList`1 entries, Func`1 generateParameterName)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.<BatchCommands>d__8.MoveNext()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.<ExecuteAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__61.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__59.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.DbContext.<SaveChangesAsync>d__48.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at Tnf.EntityFrameworkCore.TnfDbContext.<SaveChangesAsync>d__36.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Tnf.EntityFrameworkCore.Repositories.EfCoreRepositoryBase`2.<InsertAsync>d__29.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.Exceptio2018-05-22 15:32:48.464 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SampleContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "SensitiveDataLoggingEnabled "
2018-05-22 15:32:48.593 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("25"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-22 15:32:48.595 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-22 15:32:48.596 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*) FROM \"sqlite_master\" WHERE \"name\" = '__EFMigrationsHistory' AND \"type\" = 'table';"
2018-05-22 15:32:48.597 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-22 15:32:48.598 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-22 15:32:48.599 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*) FROM \"sqlite_master\" WHERE \"name\" = '__EFMigrationsHistory' AND \"type\" = 'table';"
2018-05-22 15:32:48.602 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-22 15:32:48.602 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"MigrationId\", \"ProductVersion\"
FROM \"__EFMigrationsHistory\"
ORDER BY \"MigrationId\";"
2018-05-22 15:32:48.608 -03:00 [INFO] Microsoft.EntityFrameworkCore.Migrations No migrations were applied. The database is already up to date.
2018-05-22 15:32:49.831 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/  
2018-05-22 15:32:49.848 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 15:32:49.856 -03:00 [INFO] Tnf.Settings.Internal.SettingDefinitionManager Settings definitions loaded: [Tnf.Localization.DefaultLanguageName,Tnf.Timing.TimeZone]
2018-05-22 15:32:49.862 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 15:32:49.936 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 107.3575ms 302 
2018-05-22 15:32:49.980 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/swagger  
2018-05-22 15:32:49.980 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 15:32:49.980 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 15:32:49.987 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 7.5572ms 301 
2018-05-22 15:32:49.995 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/swagger/  
2018-05-22 15:32:49.995 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 15:32:49.995 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 15:32:50.019 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 24.4885ms 200 text/html
2018-05-22 15:32:50.031 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/swagger/swagger-ui.css  
2018-05-22 15:32:50.031 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/swagger/swagger-ui-bundle.js  
2018-05-22 15:32:50.031 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 15:32:50.031 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 15:32:50.031 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 15:32:50.031 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 15:32:50.031 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/swagger/swagger-ui-standalone-preset.js  
2018-05-22 15:32:50.031 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 15:32:50.031 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 15:32:50.045 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware The file "/swagger-ui.css" was not modified
2018-05-22 15:32:50.045 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware The file "/swagger-ui-standalone-preset.js" was not modified
2018-05-22 15:32:50.045 -03:00 [INFO] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware The file "/swagger-ui-bundle.js" was not modified
2018-05-22 15:32:50.047 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 15.9809ms 304 text/css
2018-05-22 15:32:50.047 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 16.3917ms 304 application/javascript
2018-05-22 15:32:50.070 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 39.2657ms 304 application/javascript
2018-05-22 15:32:50.460 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 GET http://localhost:5055/swagger/v1/swagger.json  
2018-05-22 15:32:50.460 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 15:32:50.460 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 15:32:50.729 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 269.1373ms 200 application/json
2018-05-22 15:32:53.994 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 POST http://localhost:5055/api/employee application/json-patch+json 26
2018-05-22 15:32:53.995 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-05-22 15:32:53.995 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 15:32:53.996 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 15:32:54.020 -03:00 [INFO] Tnf.Localization.Internal.LocalizationManager Initializing 2 localization sources.
2018-05-22 15:32:54.075 -03:00 [INFO] Tnf.Localization.Internal.LocalizationManager Initialized localization source: Indexing
2018-05-22 15:32:54.075 -03:00 [INFO] Tnf.Localization.Internal.LocalizationManager Initialized localization source: Tnf
2018-05-22 15:32:54.113 -03:00 [DBUG] Tnf.AspNetCore.Mvc.Authorization.TnfAuthorizationFilter Check if method System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(Indexing.Domain.Entities.Employee) requires authorization
2018-05-22 15:32:54.113 -03:00 [DBUG] Tnf.AspNetCore.Mvc.Authorization.TnfAuthorizationFilter Not required
2018-05-22 15:32:54.122 -03:00 [INFO] Nest.ElasticClient Registering elastic client
2018-05-22 15:32:54.122 -03:00 [INFO] Nest.ElasticClient Found 1 profiles
2018-05-22 15:32:54.123 -03:00 [INFO] Nest.ElasticClient Mapping type Indexing.Domain.Entities.Employee with index name indexing_sample_employee and type name Employee
2018-05-22 15:32:54.489 -03:00 [DBUG] Nest.ElasticClient Elastic.DebugInformation: Valid NEST response built from a successful low level call on HEAD: /indexing_sample_employee
# Audit trail of this API call:
 - [1] HealthyResponse: Node: http://localhost:9200/ Took: 00:00:00.2776866
# Request:
<Request stream not captured or already read to completion by serializer. Set DisableDirectStreaming() on ConnectionSettings to force it to be set on the response.>
# Response:
<Response stream not captured or already read to completion by serializer. Set DisableDirectStreaming() on ConnectionSettings to force it to be set on the response.>

2018-05-22 15:32:54.490 -03:00 [INFO] Nest.ElasticClient Elastic.IsValid: True
2018-05-22 15:32:54.490 -03:00 [INFO] Nest.ElasticClient Index for indexing_sample_employee already exist.
2018-05-22 15:32:54.564 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executing action method "Indexing.Web.Controllers.EmployeeController.Post (Indexing.Web)" with arguments (["Indexing.Domain.Entities.Employee"]) - ModelState is Valid
2018-05-22 15:32:59.897 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SampleContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "SensitiveDataLoggingEnabled "
2018-05-22 15:32:59.984 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-22 15:33:00.046 -03:00 [EROR] Microsoft.EntityFrameworkCore.Update An exception occurred in the database while saving changes for context type '"Indexing.Infra.SqLite.Context.SampleContext"'."
""System.InvalidOperationException: The entity of 'Employee' is sharing the table 'Employees' with 'Employee.FullAddress#Address', but there is no entity of this type with the same key value 'EmployeeId:45bdd9be-0f4a-4a1a-82a6-774fe8bbe256' that has been marked as 'Added'.
   at Microsoft.EntityFrameworkCore.Update.Internal.ModificationCommandIdentityMap.Validate(Boolean sensitiveLoggingEnabled)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.CreateModificationCommands(IReadOnlyList`1 entries, Func`1 generateParameterName)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.<BatchCommands>d__8.MoveNext()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.<ExecuteAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__61.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__59.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.DbContext.<SaveChangesAsync>d__48.MoveNext()"
System.InvalidOperationException: The entity of 'Employee' is sharing the table 'Employees' with 'Employee.FullAddress#Address', but there is no entity of this type with the same key value 'EmployeeId:45bdd9be-0f4a-4a1a-82a6-774fe8bbe256' that has been marked as 'Added'.
   at Microsoft.EntityFrameworkCore.Update.Internal.ModificationCommandIdentityMap.Validate(Boolean sensitiveLoggingEnabled)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.CreateModificationCommands(IReadOnlyList`1 entries, Func`1 generateParameterName)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.<BatchCommands>d__8.MoveNext()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.<ExecuteAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__61.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__59.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.DbContext.<SaveChangesAsync>d__48.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at Tnf.EntityFrameworkCore.TnfDbContext.<SaveChangesAsync>d__36.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Tnf.EntityFrameworkCore.Repositories.EfCoreRepositoryBase`2.<InsertAsync>d__29.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Tnf.EntityFrameworkCore.Repositories.EfCoreRepositoryBase`2.<InsertAndSaveChangesAsync>d__35.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Indexing.Application.Services.EmployeeAppService.<CreateAsync>d__2.MoveNext() in D:\git\tnf-samples\Scenarios\Indexing\src\Indexing.Application\Services\EmployeeAppService.cs:line 26
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Indexing.Web.Controllers.EmployeeController.<Post>d__6.MoveNext() in D:\git\tnf-samples\Scenarios\Indexing\src\Indexing.Web\Controllers\EmployeeController.cs:line 83
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeActionMethodAsync>d__12.MoveNext()
2018-05-22 15:33:00.047 -03:00 [EROR] Tnf.EntityFrameworkCore.TnfDbContext The entity of 'Employee' is sharing the table 'Employees' with 'Employee.FullAddress#Address', but there is no entity of this type with the same key value 'EmployeeId:45bdd9be-0f4a-4a1a-82a6-774fe8bbe256' that has been marked as 'Added'.
System.InvalidOperationException: The entity of 'Employee' is sharing the table 'Employees' with 'Employee.FullAddress#Address', but there is no entity of this type with the same key value 'EmployeeId:45bdd9be-0f4a-4a1a-82a6-774fe8bbe256' that has been marked as 'Added'.
   at Microsoft.EntityFrameworkCore.Update.Internal.ModificationCommandIdentityMap.Validate(Boolean sensitiveLoggingEnabled)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.CreateModificationCommands(IReadOnlyList`1 entries, Func`1 generateParameterName)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.<BatchCommands>d__8.MoveNext()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.<ExecuteAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__61.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__59.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.DbContext.<SaveChangesAsync>d__48.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at Tnf.EntityFrameworkCore.TnfDbContext.<SaveChangesAsync>d__36.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Tnf.EntityFrameworkCore.Repositories.EfCoreRepositoryBase`2.<InsertAsync>d__29.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Tnf.EntityFrameworkCore.Repositories.EfCoreRepositoryBase`2.<InsertAndSaveChangesAsync>d__35.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Indexing.Application.Services.EmployeeAppService.<CreateAsync>d__2.MoveNext() in D:\git\tnf-samples\Scenarios\Indexing\src\Indexing.Application\Services\EmployeeAppService.cs:line 26
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Indexing.Web.Controllers.EmployeeController.<Post>d__6.MoveNext() in D:\git\tnf-samples\Scenarios\Indexing\src\Indexing.Web\Controllers\EmployeeController.cs:line 83
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeActionMethodAsync>d__12.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeNextActionFilterAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeInnerFilterAsync>d__14.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeNextExceptionFilterAsync>d__23.MoveNext()
2018-05-22 15:33:00.240 -03:00 [EROR] Tnf.AspNetCore.Mvc.Exception.TnfExceptionActionFilter The entity of 'Employee' is sharing the table 'Employees' with 'Employee.FullAddress#Address', but there is no entity of this type with the same key value 'EmployeeId:45bdd9be-0f4a-4a1a-82a6-774fe8bbe256' that has been marked as 'Added'.
System.InvalidOperationException: The entity of 'Employee' is sharing the table 'Employees' with 'Employee.FullAddress#Address', but there is no entity of this type with the same key value 'EmployeeId:45bdd9be-0f4a-4a1a-82a6-774fe8bbe256' that has been marked as 'Added'.
   at Microsoft.EntityFrameworkCore.Update.Internal.ModificationCommandIdentityMap.Validate(Boolean sensitiveLoggingEnabled)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.CreateModificationCommands(IReadOnlyList`1 entries, Func`1 generateParameterName)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.<BatchCommands>d__8.MoveNext()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.<ExecuteAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__61.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__59.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.DbContext.<SaveChangesAsync>d__48.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at Tnf.EntityFrameworkCore.TnfDbContext.<SaveChangesAsync>d__36.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Tnf.EntityFrameworkCore.Repositories.EfCoreRepositoryBase`2.<InsertAsync>d__29.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Tnf.EntityFrameworkCore.Repositories.EfCoreRepositoryBase`2.<InsertAndSaveChangesAsync>d__35.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Indexing.Application.Services.EmployeeAppService.<CreateAsync>d__2.MoveNext() in D:\git\tnf-samples\Scenarios\Indexing\src\Indexing.Application\Services\EmployeeAppService.cs:line 26
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Indexing.Web.Controllers.EmployeeController.<Post>d__6.MoveNext() in D:\git\tnf-samples\Scenarios\Indexing\src\Indexing.Web\Controllers\EmployeeController.cs:line 83
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeActionMethodAsync>d__12.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeNextActionFilterAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeInnerFilterAsync>d__14.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeNextExceptionFilterAsync>d__23.MoveNext()
2018-05-22 15:33:00.281 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ObjectResultExecutor Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2018-05-22 15:33:00.301 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executed action "Indexing.Web.Controllers.EmployeeController.Post (Indexing.Web)" in 6183.9576ms
2018-05-22 15:33:00.311 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request finished in 6316.5474ms 500 application/json; charset=utf-8
2018-05-22 15:33:41.579 -03:00 [INFO] Microsoft.AspNetCore.Hosting.Internal.WebHost Request starting HTTP/1.1 POST http://localhost:5055/api/employee application/json-patch+json 26
2018-05-22 15:33:41.580 -03:00 [INFO] Microsoft.AspNetCore.Cors.Infrastructure.CorsService Policy execution successful.
2018-05-22 15:33:41.580 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfUserRequestCultureProvider TnfSession.UserId == null
2018-05-22 15:33:41.581 -03:00 [DBUG] Tnf.AspNetCore.Localization.TnfDefaultRequestCultureProvider Default culture get from SettingManager: pt-BR
2018-05-22 15:33:41.583 -03:00 [DBUG] Tnf.AspNetCore.Mvc.Authorization.TnfAuthorizationFilter Check if method System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(Indexing.Domain.Entities.Employee) requires authorization
2018-05-22 15:33:41.583 -03:00 [DBUG] Tnf.AspNetCore.Mvc.Authorization.TnfAuthorizationFilter Not required
2018-05-22 15:33:43.865 -03:00 [INFO] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker Executing action method "Indexing.Web.Controllers.EmployeeController.Post (Indexing.Web)" with arguments (["Indexing.Domain.Entities.Employee"]) - ModelState is Valid
2018-05-22 15:49:46.998 -03:00 [INFO] Microsoft.EntityFrameworkCore.Infrastructure Entity Framework Core "2.0.3-rtm-10026" initialized '"SampleContext"' using provider '"Microsoft.EntityFrameworkCore.Sqlite"' with options: "SensitiveDataLoggingEnabled "
2018-05-22 15:49:47.006 -03:00 [INFO] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA foreign_keys=ON;"
2018-05-22 15:49:47.017 -03:00 [EROR] Microsoft.EntityFrameworkCore.Update An exception occurred in the database while saving changes for context type '"Indexing.Infra.SqLite.Context.SampleContext"'."
""System.InvalidOperationException: The entity of 'Employee' is sharing the table 'Employees' with 'Employee.FullAddress#Address', but there is no entity of this type with the same key value 'EmployeeId:12ab84bb-1c4f-4a0e-95d8-0c50a9722ea9' that has been marked as 'Added'.
   at Microsoft.EntityFrameworkCore.Update.Internal.ModificationCommandIdentityMap.Validate(Boolean sensitiveLoggingEnabled)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.CreateModificationCommands(IReadOnlyList`1 entries, Func`1 generateParameterName)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.<BatchCommands>d__8.MoveNext()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.<ExecuteAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__61.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__59.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.DbContext.<SaveChangesAsync>d__48.MoveNext()"
System.InvalidOperationException: The entity of 'Employee' is sharing the table 'Employees' with 'Employee.FullAddress#Address', but there is no entity of this type with the same key value 'EmployeeId:12ab84bb-1c4f-4a0e-95d8-0c50a9722ea9' that has been marked as 'Added'.
   at Microsoft.EntityFrameworkCore.Update.Internal.ModificationCommandIdentityMap.Validate(Boolean sensitiveLoggingEnabled)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.CreateModificationCommands(IReadOnlyList`1 entries, Func`1 generateParameterName)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.<BatchCommands>d__8.MoveNext()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.<ExecuteAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__61.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__59.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.DbContext.<SaveChangesAsync>d__48.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at Tnf.EntityFrameworkCore.TnfDbContext.<SaveChangesAsync>d__36.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Tnf.EntityFrameworkCore.Repositories.EfCoreRepositoryBase`2.<InsertAsync>d__29.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Tnf.EntityFrameworkCore.Repositories.EfCoreRepositoryBase`2.<InsertAndSaveChangesAsync>d__35.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Indexing.Application.Services.EmployeeAppService.<CreateAsync>d__2.MoveNext() in D:\git\tnf-samples\Scenarios\Indexing\src\Indexing.Application\Services\EmployeeAppService.cs:line 26
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Indexing.Web.Controllers.EmployeeController.<Post>d__6.MoveNext() in D:\git\tnf-samples\Scenarios\Indexing\src\Indexing.Web\Controllers\EmployeeController.cs:line 83
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeActionMethodAsync>d__12.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeNextActionFilterAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeInnerFilterAsync>d__14.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeNextExceptionFilterAsync>d__23.MoveNext()
2018-05-22 15:49:47.018 -03:00 [EROR] Tnf.EntityFrameworkCore.TnfDbContext The entity of 'Employee' is sharing the table 'Employees' with 'Employee.FullAddress#Address', but there is no entity of this type with the same key value 'EmployeeId:12ab84bb-1c4f-4a0e-95d8-0c50a9722ea9' that has been marked as 'Added'.
System.InvalidOperationException: The entity of 'Employee' is sharing the table 'Employees' with 'Employee.FullAddress#Address', but there is no entity of this type with the same key value 'EmployeeId:12ab84bb-1c4f-4a0e-95d8-0c50a9722ea9' that has been marked as 'Added'.
   at Microsoft.EntityFrameworkCore.Update.Internal.ModificationCommandIdentityMap.Validate(Boolean sensitiveLoggingEnabled)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.CreateModificationCommands(IReadOnlyList`1 entries, Func`1 generateParameterName)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.<BatchCommands>d__8.MoveNext()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.<ExecuteAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__61.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__59.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.DbContext.<SaveChangesAsync>d__48.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at Tnf.EntityFrameworkCore.TnfDbContext.<SaveChangesAsync>d__36.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Tnf.EntityFrameworkCore.Repositories.EfCoreRepositoryBase`2.<InsertAsync>d__29.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Tnf.EntityFrameworkCore.Repositories.EfCoreRepositoryBase`2.<InsertAndSaveChangesAsync>d__35.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Indexing.Application.Services.EmployeeAppService.<CreateAsync>d__2.MoveNext() in D:\git\tnf-samples\Scenarios\Indexing\src\Indexing.Application\Services\EmployeeAppService.cs:line 26
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Indexing.Web.Controllers.EmployeeController.<Post>d__6.MoveNext() in D:\git\tnf-samples\Scenarios\Indexing\src\Indexing.Web\Controllers\EmployeeController.cs:line 83
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeActionMethodAsync>d__12.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeNextActionFilterAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeInnerFilterAsync>d__14.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeNextExceptionFilterAsync>d__23.MoveNext()
2018-05-22 15:49:47.159 -03:00 [EROR] Tnf.AspNetCore.Mvc.Exception.TnfExceptionActionFilter The entity of 'Employee' is sharing the table 'Employees' with 'Employee.FullAddress#Address', but there is no entity of this type with the same key value 'EmployeeId:12ab84bb-1c4f-4a0e-95d8-0c50a9722ea9' that has been marked as 'Added'.
System.InvalidOperationException: The entity of 'Employee' is sharing the table 'Employees' with 'Employee.FullAddress#Address', but there is no entity of this type with the same key value 'EmployeeId:12ab84bb-1c4f-4a0e-95d8-0c50a9722ea9' that has been marked as 'Added'.
   at Microsoft.EntityFrameworkCore.Update.Internal.ModificationCommandIdentityMap.Validate(Boolean sensitiveLoggingEnabled)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.CreateModificationCommands(IReadOnlyList`1 entries, Func`1 generateParameterName)
   at Microsoft.EntityFrameworkCore.Update.Internal.CommandBatchPreparer.<BatchCommands>d__8.MoveNext()
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.<ExecuteAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__61.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<SaveChangesAsync>d__59.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.DbContext.<SaveChangesAsync>d__48.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at Tnf.EntityFrameworkCore.TnfDbContext.<SaveChangesAsync>d__36.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Tnf.EntityFrameworkCore.Repositories.EfCoreRepositoryBase`2.<InsertAsync>d__29.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Tnf.EntityFrameworkCore.Repositories.EfCoreRepositoryBase`2.<InsertAndSaveChangesAsync>d__35.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskA